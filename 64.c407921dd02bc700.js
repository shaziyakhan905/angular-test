"use strict";(self.webpackChunkangular_test=self.webpackChunkangular_test||[]).push([[64],{2064:(Kt,Xe,ve)=>{ve.r(Xe),ve.d(Xe,{AuthModule:()=>Wt});var Re=ve(177),Se=ve(7681),t=ve(8699);let ut=(()=>{class g{static{this.\u0275fac=function(o){return new(o||g)}}static{this.\u0275cmp=t.VBU({type:g,selectors:[["app-auth"]],decls:2,vars:0,template:function(o,e){1&o&&(t.j41(0,"p"),t.EFF(1,"auth works!"),t.k0s())}})}}return g})();var O=ve(4341),We=ve(5844),Oe=ve(3146);function dt(g,U){1&g&&(t.j41(0,"small"),t.EFF(1,"Email is required."),t.k0s())}function ht(g,U){1&g&&(t.j41(0,"small"),t.EFF(1,"Enter a valid email."),t.k0s())}function mt(g,U){if(1&g&&(t.j41(0,"div",12),t.DNE(1,dt,2,0,"small",13),t.DNE(2,ht,2,0,"small",13),t.k0s()),2&g){const m=t.XpG();t.R7$(1),t.Y8G("ngIf",null==m.f.emailId.errors?null:m.f.emailId.errors.required),t.R7$(1),t.Y8G("ngIf",null==m.f.emailId.errors?null:m.f.emailId.errors.emailId)}}function pt(g,U){1&g&&(t.j41(0,"small"),t.EFF(1,"Password is required."),t.k0s())}function gt(g,U){if(1&g&&(t.j41(0,"div",12),t.DNE(1,pt,2,0,"small",13),t.k0s()),2&g){const m=t.XpG();t.R7$(1),t.Y8G("ngIf",null==m.f.password.errors?null:m.f.password.errors.required)}}function bt(g,U){if(1&g&&(t.j41(0,"div",14),t.EFF(1),t.k0s()),2&g){const m=t.XpG();t.R7$(1),t.SpI(" ",m.errorMessage," ")}}let vt=(()=>{class g{constructor(m,o,e,n){this.fb=m,this.authService=o,this.commonHttp=e,this.router=n,this.errorMessage=""}ngOnInit(){this.loginForm=this.fb.group({emailId:["",[O.k0.required,O.k0.email]],password:["",[O.k0.required]]})}getUserInfo(){this.commonHttp.get("user/profile").subscribe(m=>{this.authService.setUserProfile(m.user)})}get f(){return this.loginForm.controls}submitLogin(){this.loginForm.invalid?this.loginForm.markAllAsTouched():this.authService.login(this.loginForm.value).subscribe({next:o=>{localStorage.setItem("token",o.token),this.getUserInfo(),this.authService.setUserRole(),this.router.navigate(["/"])},error:o=>{console.error(o),this.errorMessage=o.error?.message||"Login failed"}})}static{this.\u0275fac=function(o){return new(o||g)(t.rXU(O.ok),t.rXU(We.u),t.rXU(Oe.N),t.rXU(Se.Ix))}}static{this.\u0275cmp=t.VBU({type:g,selectors:[["app-login"]],decls:23,vars:4,consts:[[1,"container","d-flex","justify-content-center","align-items-center","min-vh-100"],[1,"card","shadow","p-4",2,"width","400px"],[1,"text-center","mb-4"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["type","email","formControlName","emailId","placeholder","Enter your email",1,"form-control"],["class","text-danger mt-1",4,"ngIf"],["type","password","formControlName","password","placeholder","Enter your password",1,"form-control"],["type","submit",1,"btn","btn-primary","w-100","mt-2"],["class","alert alert-danger mt-3","role","alert",4,"ngIf"],[1,"text-center","mt-3"],["routerLink","/auth/register",1,"text-decoration-none"],[1,"text-danger","mt-1"],[4,"ngIf"],["role","alert",1,"alert","alert-danger","mt-3"]],template:function(o,e){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h3",2),t.EFF(3,"\u{1f510} Login to Your Account"),t.k0s(),t.j41(4,"form",3),t.bIt("ngSubmit",function(){return e.submitLogin()}),t.j41(5,"div",4)(6,"label"),t.EFF(7,"Email"),t.k0s(),t.nrm(8,"input",5),t.DNE(9,mt,3,2,"div",6),t.k0s(),t.j41(10,"div",4)(11,"label"),t.EFF(12,"Password"),t.k0s(),t.nrm(13,"input",7),t.DNE(14,gt,2,1,"div",6),t.k0s(),t.j41(15,"button",8),t.EFF(16,"Login"),t.k0s()(),t.DNE(17,bt,2,1,"div",9),t.j41(18,"div",10)(19,"small"),t.EFF(20," Don't have an account? "),t.j41(21,"a",11),t.EFF(22,"Create one"),t.k0s()()()()()),2&o&&(t.R7$(4),t.Y8G("formGroup",e.loginForm),t.R7$(5),t.Y8G("ngIf",e.f.emailId.touched&&e.f.emailId.invalid),t.R7$(5),t.Y8G("ngIf",e.f.password.touched&&e.f.password.invalid),t.R7$(3),t.Y8G("ngIf",e.errorMessage))},dependencies:[Re.bT,Se.Wk,O.qT,O.me,O.BC,O.cb,O.j4,O.JD]})}}return g})();var Ve=ve(2023);function At(g,U){1&g&&(t.j41(0,"div",26),t.EFF(1," First name is required. "),t.k0s())}function Ft(g,U){1&g&&(t.j41(0,"div",26),t.EFF(1," Last name is required. "),t.k0s())}function yt(g,U){1&g&&(t.j41(0,"div",26),t.EFF(1," Valid email is required. "),t.k0s())}function Et(g,U){1&g&&(t.j41(0,"div",26),t.EFF(1," Enter a valid 10-digit mobile number. "),t.k0s())}function _t(g,U){1&g&&(t.j41(0,"div",26),t.EFF(1," Password must be at least 4 characters. "),t.k0s())}function wt(g,U){if(1&g&&(t.j41(0,"option",27),t.EFF(1),t.k0s()),2&g){const m=U.$implicit;t.Y8G("value",m._id),t.R7$(1),t.JRh(m.name)}}function kt(g,U){if(1&g&&(t.j41(0,"option",27),t.EFF(1),t.k0s()),2&g){const m=U.$implicit;t.Y8G("value",m._id),t.R7$(1),t.JRh(m.name)}}function Ct(g,U){if(1&g&&(t.j41(0,"option",27),t.EFF(1),t.k0s()),2&g){const m=U.$implicit;t.Y8G("value",m._id),t.R7$(1),t.JRh(m.name)}}function It(g,U){if(1&g&&(t.j41(0,"div",28),t.EFF(1),t.k0s()),2&g){const m=t.XpG();t.R7$(1),t.SpI(" ",m.errorMessage," ")}}let Ut=(()=>{class g{constructor(m,o,e,n){this.fb=m,this.http=o,this.router=e,this.natify=n,this.countries=[],this.states=[],this.cities=[],this.errorMessage=""}ngOnInit(){this.buildForm(),this.loadCountries()}buildForm(){this.registrationForm=this.fb.group({firstName:["",O.k0.required],lastName:["",O.k0.required],emailId:["",[O.k0.required,O.k0.email]],mobileNo:["",[O.k0.required,O.k0.pattern(/^[0-9]{10}$/)]],password:["",[O.k0.required,O.k0.minLength(4)]],countryId:["",O.k0.required],stateId:["",O.k0.required],cityId:["",O.k0.required]})}loadCountries(){this.http.get("address/countries").subscribe(m=>{this.countries=m})}onCountryChange(m){const e=m.target.value;this.registrationForm.patchValue({stateId:"",cityId:""}),this.states=[],this.cities=[],e&&this.loadStates(e)}loadStates(m){this.http.get(`address/states/${m}`).subscribe(o=>{this.states=o})}onStateChange(m){const e=m.target.value;this.registrationForm.patchValue({cityId:""}),this.cities=[],e&&this.loadCities(e)}loadCities(m){this.http.get(`address/cities/${m}`).subscribe(o=>{this.cities=o})}onSubmit(){this.registrationForm.invalid?this.registrationForm.markAllAsTouched():this.http.post("createUser",this.registrationForm.value).subscribe({next:()=>{this.natify.showSuccess("Registration successful! Please login."),this.router.navigate(["/home"])},error:m=>{console.error(m),this.errorMessage=m.error?.message||"Registration failed"}})}static{this.\u0275fac=function(o){return new(o||g)(t.rXU(O.ok),t.rXU(Oe.N),t.rXU(Se.Ix),t.rXU(Ve.S))}}static{this.\u0275cmp=t.VBU({type:g,selectors:[["app-register"]],decls:61,vars:10,consts:[[1,"container","py-5"],[1,"row","justify-content-center"],[1,"col-md-7","col-lg-6"],[1,"card","shadow-lg","rounded-4","p-4"],[1,"text-center","mb-4","text-primary"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","mb-3"],[1,"form-label"],["type","text","formControlName","firstName","placeholder","Enter first name",1,"form-control"],["class","text-danger small",4,"ngIf"],["type","text","formControlName","lastName","placeholder","Enter last name",1,"form-control"],[1,"mb-3"],["type","email","formControlName","emailId","placeholder","Enter email",1,"form-control"],["type","text","formControlName","mobileNo","placeholder","Enter 10-digit mobile number",1,"form-control"],["type","password","formControlName","password","placeholder","Enter password",1,"form-control"],["formControlName","countryId",1,"form-select",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","stateId",1,"form-select",3,"change"],[1,"mb-4"],["formControlName","cityId",1,"form-select"],["class","alert alert-danger",4,"ngIf"],["type","submit",1,"btn","btn-primary","w-100","rounded-pill"],[1,"text-center","mt-3"],["routerLink","/auth/login",1,"text-decoration-none"],[1,"text-danger","small"],[3,"value"],[1,"alert","alert-danger"]],template:function(o,e){if(1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.EFF(5,"\u{1f4dd} Create Your Account"),t.k0s(),t.j41(6,"form",5),t.bIt("ngSubmit",function(){return e.onSubmit()}),t.j41(7,"div",6)(8,"div",7)(9,"label",8),t.EFF(10,"First Name"),t.k0s(),t.nrm(11,"input",9),t.DNE(12,At,2,0,"div",10),t.k0s(),t.j41(13,"div",7)(14,"label",8),t.EFF(15,"Last Name"),t.k0s(),t.nrm(16,"input",11),t.DNE(17,Ft,2,0,"div",10),t.k0s()(),t.j41(18,"div",12)(19,"label",8),t.EFF(20,"Email"),t.k0s(),t.nrm(21,"input",13),t.DNE(22,yt,2,0,"div",10),t.k0s(),t.j41(23,"div",12)(24,"label",8),t.EFF(25,"Mobile Number"),t.k0s(),t.nrm(26,"input",14),t.DNE(27,Et,2,0,"div",10),t.k0s(),t.j41(28,"div",12)(29,"label",8),t.EFF(30,"Password"),t.k0s(),t.nrm(31,"input",15),t.DNE(32,_t,2,0,"div",10),t.k0s(),t.j41(33,"div",12)(34,"label",8),t.EFF(35,"Country"),t.k0s(),t.j41(36,"select",16),t.bIt("change",function(f){return e.onCountryChange(f)}),t.j41(37,"option",17),t.EFF(38,"Select Country"),t.k0s(),t.DNE(39,wt,2,2,"option",18),t.k0s()(),t.j41(40,"div",12)(41,"label",8),t.EFF(42,"State"),t.k0s(),t.j41(43,"select",19),t.bIt("change",function(f){return e.onStateChange(f)}),t.j41(44,"option",17),t.EFF(45,"Select State"),t.k0s(),t.DNE(46,kt,2,2,"option",18),t.k0s()(),t.j41(47,"div",20)(48,"label",8),t.EFF(49,"City"),t.k0s(),t.j41(50,"select",21)(51,"option",17),t.EFF(52,"Select City"),t.k0s(),t.DNE(53,Ct,2,2,"option",18),t.k0s()(),t.DNE(54,It,2,1,"div",22),t.j41(55,"button",23),t.EFF(56,"Register"),t.k0s(),t.j41(57,"p",24),t.EFF(58," Already have an account? "),t.j41(59,"a",25),t.EFF(60,"Login here"),t.k0s()()()()()()()),2&o){let n,f,l,v,E;t.R7$(6),t.Y8G("formGroup",e.registrationForm),t.R7$(6),t.Y8G("ngIf",(null==(n=e.registrationForm.get("firstName"))?null:n.touched)&&(null==(n=e.registrationForm.get("firstName"))?null:n.invalid)),t.R7$(5),t.Y8G("ngIf",(null==(f=e.registrationForm.get("lastName"))?null:f.touched)&&(null==(f=e.registrationForm.get("lastName"))?null:f.invalid)),t.R7$(5),t.Y8G("ngIf",(null==(l=e.registrationForm.get("emailId"))?null:l.touched)&&(null==(l=e.registrationForm.get("emailId"))?null:l.invalid)),t.R7$(5),t.Y8G("ngIf",(null==(v=e.registrationForm.get("mobileNo"))?null:v.touched)&&(null==(v=e.registrationForm.get("mobileNo"))?null:v.invalid)),t.R7$(5),t.Y8G("ngIf",(null==(E=e.registrationForm.get("password"))?null:E.touched)&&(null==(E=e.registrationForm.get("password"))?null:E.invalid)),t.R7$(7),t.Y8G("ngForOf",e.countries),t.R7$(7),t.Y8G("ngForOf",e.states),t.R7$(7),t.Y8G("ngForOf",e.cities),t.R7$(1),t.Y8G("ngIf",e.errorMessage)}},dependencies:[Re.Sq,Re.bT,Se.Wk,O.qT,O.xH,O.y7,O.me,O.wz,O.BC,O.cb,O.j4,O.JD]})}}return g})();function Je(g,U){return new Promise(function(m,o){let e;return St(g).then(function(n){try{return e=n,m(new Blob([U.slice(0,2),e,U.slice(2)],{type:"image/jpeg"}))}catch(f){return o(f)}},o)})}const St=g=>new Promise((U,m)=>{const o=new FileReader;o.addEventListener("load",({target:{result:e}})=>{const n=new DataView(e);let f=0;if(65496!==n.getUint16(f))return m("not a valid JPEG");for(f+=2;;){const l=n.getUint16(f);if(65498===l)break;const v=n.getUint16(f+2);if(65505===l&&1165519206===n.getUint32(f+4)){const E=f+10;let i;switch(n.getUint16(E)){case 18761:i=!0;break;case 19789:i=!1;break;default:return m("TIFF header contains invalid endian")}if(42!==n.getUint16(E+2,i))return m("TIFF header contains invalid version");const s=n.getUint32(E+4,i),r=E+s+2+12*n.getUint16(E+s,i);for(let c=E+s+2;c<r;c+=12)if(274==n.getUint16(c,i)){if(3!==n.getUint16(c+2,i))return m("Orientation data type is invalid");if(1!==n.getUint32(c+4,i))return m("Orientation data count is invalid");n.setUint16(c+8,1,i);break}return U(e.slice(f,f+2+v))}f+=2+v}return U(new Blob)}),o.readAsArrayBuffer(g)});var U,m,o,Te={};({get exports(){return Te},set exports(g){Te=g}}).exports=o={},o.parse=function(e,n){for(var f=o.bin.readUshort,l=o.bin.readUint,v=0,E={},i=new Uint8Array(e),s=i.length-4;101010256!=l(i,s);)s--;v=s,v+=4;var r=f(i,v+=4);f(i,v+=2);var c=l(i,v+=2),p=l(i,v+=4);v+=4,v=p;for(var C=0;C<r;C++){l(i,v),v+=4,v+=4,v+=4,l(i,v+=4),c=l(i,v+=4);var N=l(i,v+=4),y=f(i,v+=4),B=f(i,v+2),P=f(i,v+4);v+=6;var S=l(i,v+=8);v+=4,v+=y+B+P,o._readLocal(i,S,E,c,N,n)}return E},o._readLocal=function(e,n,f,l,v,E){var i=o.bin.readUshort,s=o.bin.readUint;s(e,n),i(e,n+=4),i(e,n+=2);var r=i(e,n+=2);s(e,n+=2),s(e,n+=4),n+=4;var c=i(e,n+=8),p=i(e,n+=2),C=o.bin.readUTF8(e,n+=2,c);if(n+=c,n+=p,E)f[C]={size:v,csize:l};else{var N=new Uint8Array(e.buffer,n);if(0==r)f[C]=new Uint8Array(N.buffer.slice(n,n+l));else{if(8!=r)throw"unknown compression method: "+r;var y=new Uint8Array(v);o.inflateRaw(N,y),f[C]=y}}},o.inflateRaw=function(e,n){return o.F.inflate(e,n)},o.inflate=function(e,n){return o.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),n)},o.deflate=function(e,n){null==n&&(n={level:6});var f=0,l=new Uint8Array(50+Math.floor(1.1*e.length));l[f]=120,l[f+1]=156,f=o.F.deflateRaw(e,l,f+=2,n.level);var v=o.adler(e,0,e.length);return l[f+0]=v>>>24&255,l[f+1]=v>>>16&255,l[f+2]=v>>>8&255,l[f+3]=v>>>0&255,new Uint8Array(l.buffer,0,f+4)},o.deflateRaw=function(e,n){null==n&&(n={level:6});var f=new Uint8Array(50+Math.floor(1.1*e.length)),l=o.F.deflateRaw(e,f,l,n.level);return new Uint8Array(f.buffer,0,l)},o.encode=function(e,n){null==n&&(n=!1);var f=0,l=o.bin.writeUint,v=o.bin.writeUshort,E={};for(var i in e){var s=!o._noNeed(i)&&!n,r=e[i],c=o.crc.crc(r,0,r.length);E[i]={cpr:s,usize:r.length,crc:c,file:s?o.deflateRaw(r):r}}for(var i in E)f+=E[i].file.length+30+46+2*o.bin.sizeUTF8(i);f+=22;var p=new Uint8Array(f),C=0,N=[];for(var i in E){var y=E[i];N.push(C),C=o._writeHeader(p,C,i,y,0)}var B=0,P=C;for(var i in E)y=E[i],N.push(C),C=o._writeHeader(p,C,i,y,1,N[B++]);var S=C-P;return l(p,C,101010256),C+=4,v(p,C+=4,B),v(p,C+=2,B),l(p,C+=2,S),l(p,C+=4,P),C+=4,C+=2,p.buffer},o._noNeed=function(e){var n=e.split(".").pop().toLowerCase();return-1!="png,jpg,jpeg,zip".indexOf(n)},o._writeHeader=function(e,n,f,l,v,E){var i=o.bin.writeUint,s=o.bin.writeUshort,r=l.file;return i(e,n,0==v?67324752:33639248),n+=4,1==v&&(n+=2),s(e,n,20),s(e,n+=2,0),s(e,n+=2,l.cpr?8:0),i(e,n+=2,0),i(e,n+=4,l.crc),i(e,n+=4,r.length),i(e,n+=4,l.usize),s(e,n+=4,o.bin.sizeUTF8(f)),s(e,n+=2,0),n+=2,1==v&&(n+=2,n+=2,i(e,n+=6,E),n+=4),n+=o.bin.writeUTF8(e,n,f),0==v&&(e.set(r,n),n+=r.length),n},o.crc={table:function(){for(var e=new Uint32Array(256),n=0;n<256;n++){for(var f=n,l=0;l<8;l++)1&f?f=3988292384^f>>>1:f>>>=1;e[n]=f}return e}(),update:function(e,n,f,l){for(var v=0;v<l;v++)e=o.crc.table[255&(e^n[f+v])]^e>>>8;return e},crc:function(e,n,f){return 4294967295^o.crc.update(4294967295,e,n,f)}},o.adler=function(e,n,f){for(var l=1,v=0,E=n,i=n+f;E<i;){for(var s=Math.min(E+5552,i);E<s;)v+=l+=e[E++];l%=65521,v%=65521}return v<<16|l},o.bin={readUshort:function(e,n){return e[n]|e[n+1]<<8},writeUshort:function(e,n,f){e[n]=255&f,e[n+1]=f>>8&255},readUint:function(e,n){return 16777216*e[n+3]+(e[n+2]<<16|e[n+1]<<8|e[n])},writeUint:function(e,n,f){e[n]=255&f,e[n+1]=f>>8&255,e[n+2]=f>>16&255,e[n+3]=f>>24&255},readASCII:function(e,n,f){for(var l="",v=0;v<f;v++)l+=String.fromCharCode(e[n+v]);return l},writeASCII:function(e,n,f){for(var l=0;l<f.length;l++)e[n+l]=f.charCodeAt(l)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,n,f){for(var l,v="",E=0;E<f;E++)v+="%"+o.bin.pad(e[n+E].toString(16));try{l=decodeURIComponent(v)}catch{return o.bin.readASCII(e,n,f)}return l},writeUTF8:function(e,n,f){for(var l=f.length,v=0,E=0;E<l;E++){var i=f.charCodeAt(E);if(4294967168&i)if(4294965248&i)if(4294901760&i){if(4292870144&i)throw"e";e[n+v]=240|i>>18,e[n+v+1]=128|i>>12&63,e[n+v+2]=128|i>>6&63,e[n+v+3]=128|i>>0&63,v+=4}else e[n+v]=224|i>>12,e[n+v+1]=128|i>>6&63,e[n+v+2]=128|i>>0&63,v+=3;else e[n+v]=192|i>>6,e[n+v+1]=128|i>>0&63,v+=2;else e[n+v]=i,v++}return v},sizeUTF8:function(e){for(var n=e.length,f=0,l=0;l<n;l++){var v=e.charCodeAt(l);if(4294967168&v)if(4294965248&v)if(4294901760&v){if(4292870144&v)throw"e";f+=4}else f+=3;else f+=2;else f++}return f}},o.F={},o.F.deflateRaw=function(e,n,f,l){var v=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][l],E=o.F.U,i=o.F._goodIndex,s=o.F._putsE,r=0,c=f<<3,p=0,C=e.length;if(0==l){for(;r<C;)s(n,c,r+(w=Math.min(65535,C-r))==C?1:0),c=o.F._copyExact(e,r,w,n,c+8),r+=w;return c>>>3}var N=E.lits,y=E.strt,B=E.prev,P=0,S=0,M=0,b=0,x=0,d=0;for(C>2&&(y[d=o.F._hash(e,0)]=0),r=0;r<C;r++){if(x=d,r+1<C-2){d=o.F._hash(e,r+1);var u=r+1&32767;B[u]=y[d],y[d]=u}if(p<=r){(P>14e3||S>26697)&&C-r>100&&(p<r&&(N[P]=r-p,P+=2,p=r),c=o.F._writeBlock(r==C-1||p==C?1:0,N,P,b,e,M,r-M,n,c),P=S=b=0,M=r);var F=0;r<C-2&&(F=o.F._bestMatch(e,r,B,x,Math.min(v[2],C-r),v[3]));var w=F>>>16,_=65535&F;if(0!=F){_=65535&F;var k=i(w=F>>>16,E.of0);E.lhst[257+k]++;var A=i(_,E.df0);E.dhst[A]++,b+=E.exb[k]+E.dxb[A],N[P]=w<<23|r-p,N[P+1]=_<<16|k<<8|A,P+=2,p=r+w}else E.lhst[e[r]]++;S++}}for(M==r&&0!=e.length||(p<r&&(N[P]=r-p,P+=2,p=r),c=o.F._writeBlock(1,N,P,b,e,M,r-M,n,c),P=0,S=0,P=S=b=0,M=r);7&c;)c++;return c>>>3},o.F._bestMatch=function(e,n,f,l,v,E){var i=32767&n,s=f[i],r=i-s+32768&32767;if(s==i||l!=o.F._hash(e,n-r))return 0;for(var c=0,p=0,C=Math.min(32767,n);r<=C&&0!=--E&&s!=i;){if(0==c||e[n+c]==e[n+c-r]){var N=o.F._howLong(e,n,r);if(N>c){if(p=r,(c=N)>=v)break;r+2<N&&(N=r+2);for(var y=0,B=0;B<N-2;B++){var P=n-r+B+32768&32767,S=P-f[P]+32768&32767;S>y&&(y=S,s=P)}}}r+=(i=s)-(s=f[i])+32768&32767}return c<<16|p},o.F._howLong=function(e,n,f){if(e[n]!=e[n-f]||e[n+1]!=e[n+1-f]||e[n+2]!=e[n+2-f])return 0;var l=n,v=Math.min(e.length,n+258);for(n+=3;n<v&&e[n]==e[n-f];)n++;return n-l},o.F._hash=function(e,n){return(e[n]<<8|e[n+1])+(e[n+2]<<4)&65535},o.saved=0,o.F._writeBlock=function(e,n,f,l,v,E,i,s,r){var c,p,C,N,y,B,P,S,M,b=o.F.U,x=o.F._putsF,d=o.F._putsE;b.lhst[256]++,p=(c=o.F.getTrees())[0],C=c[1],N=c[2],y=c[3],B=c[4],P=c[5],S=c[6],M=c[7];var u=32+(r+3&7?8-(r+3&7):0)+(i<<3),F=l+o.F.contSize(b.fltree,b.lhst)+o.F.contSize(b.fdtree,b.dhst),w=l+o.F.contSize(b.ltree,b.lhst)+o.F.contSize(b.dtree,b.dhst);w+=14+3*P+o.F.contSize(b.itree,b.ihst)+(2*b.ihst[16]+3*b.ihst[17]+7*b.ihst[18]);for(var _=0;_<286;_++)b.lhst[_]=0;for(_=0;_<30;_++)b.dhst[_]=0;for(_=0;_<19;_++)b.ihst[_]=0;var k=u<F&&u<w?0:F<w?1:2;if(x(s,r,e),x(s,r+1,k),r+=3,0==k){for(;7&r;)r++;r=o.F._copyExact(v,E,i,s,r)}else{var A,R;if(1==k&&(A=b.fltree,R=b.fdtree),2==k){o.F.makeCodes(b.ltree,p),o.F.revCodes(b.ltree,p),o.F.makeCodes(b.dtree,C),o.F.revCodes(b.dtree,C),o.F.makeCodes(b.itree,N),o.F.revCodes(b.itree,N),A=b.ltree,R=b.dtree,d(s,r,y-257),d(s,r+=5,B-1),d(s,r+=5,P-4),r+=4;for(var h=0;h<P;h++)d(s,r+3*h,b.itree[1+(b.ordr[h]<<1)]);r=o.F._codeTiny(S,b.itree,s,r+=3*P),r=o.F._codeTiny(M,b.itree,s,r)}for(var a=E,T=0;T<f;T+=2){for(var I=n[T],D=I>>>23,L=a+(8388607&I);a<L;)r=o.F._writeLit(v[a++],A,s,r);if(0!=D){var Q=n[T+1],$=Q>>16,G=Q>>8&255,j=255&Q;d(s,r=o.F._writeLit(257+G,A,s,r),D-b.of0[G]),x(s,r=o.F._writeLit(j,R,s,r+=b.exb[G]),$-b.df0[j]),r+=b.dxb[j],a+=D}}r=o.F._writeLit(256,A,s,r)}return r},o.F._copyExact=function(e,n,f,l,v){var E=v>>>3;return l[E]=f,l[E+1]=f>>>8,l[E+2]=255-l[E],l[E+3]=255-l[E+1],E+=4,l.set(new Uint8Array(e.buffer,n,f),E),v+(f+4<<3)},o.F.getTrees=function(){for(var e=o.F.U,n=o.F._hufTree(e.lhst,e.ltree,15),f=o.F._hufTree(e.dhst,e.dtree,15),l=[],v=o.F._lenCodes(e.ltree,l),E=[],i=o.F._lenCodes(e.dtree,E),s=0;s<l.length;s+=2)e.ihst[l[s]]++;for(s=0;s<E.length;s+=2)e.ihst[E[s]]++;for(var r=o.F._hufTree(e.ihst,e.itree,7),c=19;c>4&&0==e.itree[1+(e.ordr[c-1]<<1)];)c--;return[n,f,r,v,i,c,l,E]},o.F.getSecond=function(e){for(var n=[],f=0;f<e.length;f+=2)n.push(e[f+1]);return n},o.F.nonZero=function(e){for(var n="",f=0;f<e.length;f+=2)0!=e[f+1]&&(n+=(f>>1)+",");return n},o.F.contSize=function(e,n){for(var f=0,l=0;l<n.length;l++)f+=n[l]*e[1+(l<<1)];return f},o.F._codeTiny=function(e,n,f,l){for(var v=0;v<e.length;v+=2){var E=e[v],i=e[v+1];l=o.F._writeLit(E,n,f,l);var s=16==E?2:17==E?3:7;E>15&&(o.F._putsE(f,l,i,s),l+=s)}return l},o.F._lenCodes=function(e,n){for(var f=e.length;2!=f&&0==e[f-1];)f-=2;for(var l=0;l<f;l+=2){var v=e[l+1],E=l+3<f?e[l+3]:-1,i=l+5<f?e[l+5]:-1,s=0==l?-1:e[l-1];if(0==v&&E==v&&i==v){for(var r=l+5;r+2<f&&e[r+2]==v;)r+=2;(c=Math.min(r+1-l>>>1,138))<11?n.push(17,c-3):n.push(18,c-11),l+=2*c-2}else if(v==s&&E==v&&i==v){for(r=l+5;r+2<f&&e[r+2]==v;)r+=2;var c=Math.min(r+1-l>>>1,6);n.push(16,c-3),l+=2*c-2}else n.push(v,0)}return f>>>1},o.F._hufTree=function(e,n,f){var l=[],v=e.length,E=n.length,i=0;for(i=0;i<E;i+=2)n[i]=0,n[i+1]=0;for(i=0;i<v;i++)0!=e[i]&&l.push({lit:i,f:e[i]});var s=l.length,r=l.slice(0);if(0==s)return 0;if(1==s){var c=l[0].lit;return r=0==c?1:0,n[1+(c<<1)]=1,n[1+(r<<1)]=1,1}l.sort(function(S,M){return S.f-M.f});var p=l[0],C=l[1],N=0,y=1,B=2;for(l[0]={lit:-1,f:p.f+C.f,l:p,r:C,d:0};y!=s-1;)p=N!=y&&(B==s||l[N].f<l[B].f)?l[N++]:l[B++],C=N!=y&&(B==s||l[N].f<l[B].f)?l[N++]:l[B++],l[y++]={lit:-1,f:p.f+C.f,l:p,r:C};var P=o.F.setDepth(l[y-1],0);for(P>f&&(o.F.restrictDepth(r,f,P),P=f),i=0;i<s;i++)n[1+(r[i].lit<<1)]=r[i].d;return P},o.F.setDepth=function(e,n){return-1!=e.lit?(e.d=n,n):Math.max(o.F.setDepth(e.l,n+1),o.F.setDepth(e.r,n+1))},o.F.restrictDepth=function(e,n,f){var l=0,v=1<<f-n,E=0;for(e.sort(function(s,r){return r.d==s.d?s.f-r.f:r.d-s.d}),l=0;l<e.length&&e[l].d>n;l++){var i=e[l].d;e[l].d=n,E+=v-(1<<f-i)}for(E>>>=f-n;E>0;)(i=e[l].d)<n?(e[l].d++,E-=1<<n-i-1):l++;for(;l>=0;l--)e[l].d==n&&E<0&&(e[l].d--,E++);0!=E&&console.log("debt left")},o.F._goodIndex=function(e,n){var f=0;return n[16|f]<=e&&(f|=16),n[8|f]<=e&&(f|=8),n[4|f]<=e&&(f|=4),n[2|f]<=e&&(f|=2),n[1|f]<=e&&(f|=1),f},o.F._writeLit=function(e,n,f,l){return o.F._putsF(f,l,n[e<<1]),l+n[1+(e<<1)]},o.F.inflate=function(e,n){var f=Uint8Array;if(3==e[0]&&0==e[1])return n||new f(0);var l=o.F,v=l._bitsF,E=l._bitsE,i=l._decodeTiny,s=l.makeCodes,r=l.codes2map,c=l._get17,p=l.U,C=null==n;C&&(n=new f(e.length>>>2<<3));for(var N,y,B=0,P=0,S=0,M=0,b=0,x=0,d=0,u=0,F=0;0==B;)if(B=v(e,F,1),P=v(e,F+1,2),F+=3,0!=P){if(C&&(n=o.F._check(n,u+(1<<17))),1==P&&(N=p.flmap,y=p.fdmap,x=511,d=31),2==P){S=E(e,F,5)+257,M=E(e,F+5,5)+1,b=E(e,F+10,4)+4,F+=14;for(var w=0;w<38;w+=2)p.itree[w]=0,p.itree[w+1]=0;var _=1;for(w=0;w<b;w++){var k=E(e,F+3*w,3);p.itree[1+(p.ordr[w]<<1)]=k,k>_&&(_=k)}F+=3*b,s(p.itree,_),r(p.itree,_,p.imap),N=p.lmap,y=p.dmap,F=i(p.imap,(1<<_)-1,S+M,e,F,p.ttree);var A=l._copyOut(p.ttree,0,S,p.ltree);x=(1<<A)-1;var R=l._copyOut(p.ttree,S,M,p.dtree);d=(1<<R)-1,s(p.ltree,A),r(p.ltree,A,N),s(p.dtree,R),r(p.dtree,R,y)}for(;;){var h=N[c(e,F)&x];F+=15&h;var a=h>>>4;if(a>>>8){if(256==a)break;var T=u+a-254;if(a>264){var I=p.ldef[a-257];T=u+(I>>>3)+E(e,F,7&I),F+=7&I}var D=y[c(e,F)&d],Q=p.ddef[D>>>4],$=(Q>>>4)+v(e,F+=15&D,15&Q);for(F+=15&Q,C&&(n=o.F._check(n,u+(1<<17)));u<T;)n[u]=n[u++-$],n[u]=n[u++-$],n[u]=n[u++-$],n[u]=n[u++-$];u=T}else n[u++]=a}}else{7&F&&(F+=8-(7&F));var G=4+(F>>>3),j=e[G-4]|e[G-3]<<8;C&&(n=o.F._check(n,u+j)),n.set(new f(e.buffer,e.byteOffset+G,j),u),F=G+j<<3,u+=j}return n.length==u?n:n.slice(0,u)},o.F._check=function(e,n){var f=e.length;if(n<=f)return e;var l=new Uint8Array(Math.max(f<<1,n));return l.set(e,0),l},o.F._decodeTiny=function(e,n,f,l,v,E){for(var i=o.F._bitsE,s=o.F._get17,r=0;r<f;){var c=e[s(l,v)&n];v+=15&c;var p=c>>>4;if(p<=15)E[r]=p,r++;else{var C=0,N=0;16==p?(N=3+i(l,v,2),v+=2,C=E[r-1]):17==p?(N=3+i(l,v,3),v+=3):18==p&&(N=11+i(l,v,7),v+=7);for(var y=r+N;r<y;)E[r]=C,r++}}return v},o.F._copyOut=function(e,n,f,l){for(var v=0,E=0,i=l.length>>>1;E<f;){var s=e[E+n];l[E<<1]=0,l[1+(E<<1)]=s,s>v&&(v=s),E++}for(;E<i;)l[E<<1]=0,l[1+(E<<1)]=0,E++;return v},o.F.makeCodes=function(e,n){for(var f,l,v,E,i=o.F.U,s=e.length,r=i.bl_count,c=0;c<=n;c++)r[c]=0;for(c=1;c<s;c+=2)r[e[c]]++;var p=i.next_code;for(f=0,r[0]=0,l=1;l<=n;l++)p[l]=f=f+r[l-1]<<1;for(v=0;v<s;v+=2)0!=(E=e[v+1])&&(e[v]=p[E],p[E]++)},o.F.codes2map=function(e,n,f){for(var l=e.length,v=o.F.U.rev15,E=0;E<l;E+=2)if(0!=e[E+1])for(var s=e[E+1],r=E>>1<<4|s,c=n-s,p=e[E]<<c,C=p+(1<<c);p!=C;)f[v[p]>>>15-n]=r,p++},o.F.revCodes=function(e,n){for(var f=o.F.U.rev15,l=15-n,v=0;v<e.length;v+=2)e[v]=f[e[v]<<n-e[v+1]]>>>l},o.F._putsE=function(e,n,f){var l=n>>>3;e[l]|=f<<=7&n,e[l+1]|=f>>>8},o.F._putsF=function(e,n,f){var l=n>>>3;e[l]|=f<<=7&n,e[l+1]|=f>>>8,e[l+2]|=f>>>16},o.F._bitsE=function(e,n,f){return(e[n>>>3]|e[1+(n>>>3)]<<8)>>>(7&n)&(1<<f)-1},o.F._bitsF=function(e,n,f){return(e[n>>>3]|e[1+(n>>>3)]<<8|e[2+(n>>>3)]<<16)>>>(7&n)&(1<<f)-1},o.F._get17=function(e,n){return(e[n>>>3]|e[1+(n>>>3)]<<8|e[2+(n>>>3)]<<16)>>>(7&n)},o.F._get25=function(e,n){return(e[n>>>3]|e[1+(n>>>3)]<<8|e[2+(n>>>3)]<<16|e[3+(n>>>3)]<<24)>>>(7&n)},o.F.U=(U=Uint16Array,m=Uint32Array,{next_code:new U(16),bl_count:new U(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new U(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new m(32),flmap:new U(512),fltree:[],fdmap:new U(32),fdtree:[],lmap:new U(32768),ltree:[],ttree:[],dmap:new U(32768),dtree:[],imap:new U(512),itree:[],rev15:new U(32768),lhst:new m(286),dhst:new m(30),ihst:new m(19),lits:new m(15e3),strt:new U(65536),prev:new U(32768)}),function(){for(var e=o.F.U,n=0;n<32768;n++){var f=n;f=(4278255360&(f=(4042322160&(f=(3435973836&(f=(2863311530&f)>>>1|(1431655765&f)<<1))>>>2|(858993459&f)<<2))>>>4|(252645135&f)<<4))>>>8|(16711935&f)<<8,e.rev15[n]=(f>>>16|f<<16)>>>17}function l(v,E,i){for(;0!=E--;)v.push(0,i)}for(n=0;n<32;n++)e.ldef[n]=e.of0[n]<<3|e.exb[n],e.ddef[n]=e.df0[n]<<4|e.dxb[n];l(e.fltree,144,8),l(e.fltree,112,9),l(e.fltree,24,7),l(e.fltree,8,8),o.F.makeCodes(e.fltree,9),o.F.codes2map(e.fltree,9,e.flmap),o.F.revCodes(e.fltree,9),l(e.fdtree,32,5),o.F.makeCodes(e.fdtree,5),o.F.codes2map(e.fdtree,5,e.fdmap),o.F.revCodes(e.fdtree,5),l(e.itree,19,0),l(e.ltree,286,0),l(e.dtree,30,0),l(e.ttree,320,0)}();var jt=function Rt(g,U){return U.forEach(function(m){m&&"string"!=typeof m&&!Array.isArray(m)&&Object.keys(m).forEach(function(o){if("default"!==o&&!(o in g)){var e=Object.getOwnPropertyDescriptor(m,o);Object.defineProperty(g,o,e.get?e:{enumerable:!0,get:function(){return m[o]}})}})}),Object.freeze(g)}({__proto__:null,default:Te},[Te]);const he=function(){var g={nextZero(i,s){for(;0!=i[s];)s++;return s},readUshort:(i,s)=>i[s]<<8|i[s+1],writeUshort(i,s,r){i[s]=r>>8&255,i[s+1]=255&r},readUint:(i,s)=>16777216*i[s]+(i[s+1]<<16|i[s+2]<<8|i[s+3]),writeUint(i,s,r){i[s]=r>>24&255,i[s+1]=r>>16&255,i[s+2]=r>>8&255,i[s+3]=255&r},readASCII(i,s,r){let c="";for(let p=0;p<r;p++)c+=String.fromCharCode(i[s+p]);return c},writeASCII(i,s,r){for(let c=0;c<r.length;c++)i[s+c]=r.charCodeAt(c)},readBytes(i,s,r){const c=[];for(let p=0;p<r;p++)c.push(i[s+p]);return c},pad:i=>i.length<2?`0${i}`:i,readUTF8(i,s,r){let c,p="";for(let C=0;C<r;C++)p+=`%${g.pad(i[s+C].toString(16))}`;try{c=decodeURIComponent(p)}catch{return g.readASCII(i,s,r)}return c}};function U(i,s,r,c){const p=s*r,C=n(c),N=Math.ceil(s*C/8),y=new Uint8Array(4*p),B=new Uint32Array(y.buffer),{ctype:P}=c,{depth:S}=c,M=g.readUshort;if(6==P){const I=p<<2;if(8==S)for(var b=0;b<I;b+=4)y[b]=i[b],y[b+1]=i[b+1],y[b+2]=i[b+2],y[b+3]=i[b+3];if(16==S)for(b=0;b<I;b++)y[b]=i[b<<1]}else if(2==P){const I=c.tabs.tRNS;if(null==I){if(8==S)for(b=0;b<p;b++){var x=3*b;B[b]=255<<24|i[x+2]<<16|i[x+1]<<8|i[x]}if(16==S)for(b=0;b<p;b++)B[b]=255<<24|i[4+(x=6*b)]<<16|i[x+2]<<8|i[x]}else{var d=I[0];const D=I[1],L=I[2];if(8==S)for(b=0;b<p;b++){var u=b<<2;B[b]=255<<24|i[2+(x=3*b)]<<16|i[x+1]<<8|i[x],i[x]==d&&i[x+1]==D&&i[x+2]==L&&(y[u+3]=0)}if(16==S)for(b=0;b<p;b++)u=b<<2,B[b]=255<<24|i[4+(x=6*b)]<<16|i[x+2]<<8|i[x],M(i,x)==d&&M(i,x+2)==D&&M(i,x+4)==L&&(y[u+3]=0)}}else if(3==P){const I=c.tabs.PLTE,D=c.tabs.tRNS,L=D?D.length:0;if(1==S)for(var F=0;F<r;F++){var w=F*N,_=F*s;for(b=0;b<s;b++){var k=3*(A=i[w+(b>>3)]>>7-((7&b)<<0)&1);y[u=_+b<<2]=I[k],y[u+1]=I[k+1],y[u+2]=I[k+2],y[u+3]=A<L?D[A]:255}}if(2==S)for(F=0;F<r;F++)for(w=F*N,_=F*s,b=0;b<s;b++)k=3*(A=i[w+(b>>2)]>>6-((3&b)<<1)&3),y[u=_+b<<2]=I[k],y[u+1]=I[k+1],y[u+2]=I[k+2],y[u+3]=A<L?D[A]:255;if(4==S)for(F=0;F<r;F++)for(w=F*N,_=F*s,b=0;b<s;b++)k=3*(A=i[w+(b>>1)]>>4-((1&b)<<2)&15),y[u=_+b<<2]=I[k],y[u+1]=I[k+1],y[u+2]=I[k+2],y[u+3]=A<L?D[A]:255;if(8==S)for(b=0;b<p;b++){var A;k=3*(A=i[b]),y[u=b<<2]=I[k],y[u+1]=I[k+1],y[u+2]=I[k+2],y[u+3]=A<L?D[A]:255}}else if(4==P){if(8==S)for(b=0;b<p;b++){var R=i[h=b<<1];y[u=b<<2]=R,y[u+1]=R,y[u+2]=R,y[u+3]=i[h+1]}if(16==S)for(b=0;b<p;b++){var h;R=i[h=b<<2],y[u=b<<2]=R,y[u+1]=R,y[u+2]=R,y[u+3]=i[h+2]}}else if(0==P)for(d=c.tabs.tRNS?c.tabs.tRNS:-1,F=0;F<r;F++){const I=F*N,D=F*s;if(1==S)for(var a=0;a<s;a++){var T=(R=255*(i[I+(a>>>3)]>>>7-(7&a)&1))==255*d?0:255;B[D+a]=T<<24|R<<16|R<<8|R}else if(2==S)for(a=0;a<s;a++)T=(R=85*(i[I+(a>>>2)]>>>6-((3&a)<<1)&3))==85*d?0:255,B[D+a]=T<<24|R<<16|R<<8|R;else if(4==S)for(a=0;a<s;a++)T=(R=17*(i[I+(a>>>1)]>>>4-((1&a)<<2)&15))==17*d?0:255,B[D+a]=T<<24|R<<16|R<<8|R;else if(8==S)for(a=0;a<s;a++)T=(R=i[I+a])==d?0:255,B[D+a]=T<<24|R<<16|R<<8|R;else if(16==S)for(a=0;a<s;a++)R=i[I+(a<<1)],T=M(i,I+(a<<1))==d?0:255,B[D+a]=T<<24|R<<16|R<<8|R}return y}function m(i,s,r,c){const p=n(i),C=Math.ceil(r*p/8),N=new Uint8Array((C+1+i.interlace)*c);return s=i.tabs.CgBI?e(s,N):o(s,N),0==i.interlace?s=f(s,i,0,r,c):1==i.interlace&&(s=function(B,P){const S=P.width,M=P.height,b=n(P),x=b>>3,d=Math.ceil(S*b/8),u=new Uint8Array(M*d);let F=0;const w=[0,0,4,0,2,0,1],_=[0,4,0,2,0,1,0],k=[8,8,8,4,4,2,2],A=[8,8,4,4,2,2,1];let R=0;for(;R<7;){const a=k[R],T=A[R];let I=0,D=0,L=w[R];for(;L<M;)L+=a,D++;let Q=_[R];for(;Q<S;)Q+=T,I++;const $=Math.ceil(I*b/8);f(B,P,F,I,D);let G=0,j=w[R];for(;j<M;){let H=_[R],V=F+G*$<<3;for(;H<S;){var h;if(1==b&&(h=(h=B[V>>3])>>7-(7&V)&1,u[j*d+(H>>3)]|=h<<7-((7&H)<<0)),2==b&&(h=(h=B[V>>3])>>6-(7&V)&3,u[j*d+(H>>2)]|=h<<6-((3&H)<<1)),4==b&&(h=(h=B[V>>3])>>4-(7&V)&15,u[j*d+(H>>1)]|=h<<4-((1&H)<<2)),b>=8){const z=j*d+H*x;for(let Y=0;Y<x;Y++)u[z+Y]=B[(V>>3)+Y]}V+=b,H+=T}G++,j+=a}I*D!=0&&(F+=D*(1+$)),R+=1}return u}(s,i)),s}function o(i,s){return e(new Uint8Array(i.buffer,2,i.length-6),s)}var e=function(){const i={H:{}};return i.H.N=function(s,r){const c=Uint8Array;let p,C,N=0,y=0,B=0,P=0,S=0,M=0,b=0,x=0,d=0;if(3==s[0]&&0==s[1])return r||new c(0);const u=i.H,F=u.b,w=u.e,_=u.R,k=u.n,A=u.A,R=u.Z,h=u.m,a=null==r;for(a&&(r=new c(s.length>>>2<<5));0==N;)if(N=F(s,d,1),y=F(s,d+1,2),d+=3,0!=y){if(a&&(r=i.H.W(r,x+(1<<17))),1==y&&(p=h.J,C=h.h,M=511,b=31),2==y){B=w(s,d,5)+257,P=w(s,d+5,5)+1,S=w(s,d+10,4)+4,d+=14;let I=1;for(var T=0;T<38;T+=2)h.Q[T]=0,h.Q[T+1]=0;for(T=0;T<S;T++){const Q=w(s,d+3*T,3);h.Q[1+(h.X[T]<<1)]=Q,Q>I&&(I=Q)}d+=3*S,k(h.Q,I),A(h.Q,I,h.u),p=h.w,C=h.d,d=_(h.u,(1<<I)-1,B+P,s,d,h.v);const D=u.V(h.v,0,B,h.C);M=(1<<D)-1;const L=u.V(h.v,B,P,h.D);b=(1<<L)-1,k(h.C,D),A(h.C,D,p),k(h.D,L),A(h.D,L,C)}for(;;){const I=p[R(s,d)&M];d+=15&I;const D=I>>>4;if(D>>>8){if(256==D)break;{let L=x+D-254;if(D>264){const H=h.q[D-257];L=x+(H>>>3)+w(s,d,7&H),d+=7&H}const Q=C[R(s,d)&b];d+=15&Q;const G=h.c[Q>>>4],j=(G>>>4)+F(s,d,15&G);for(d+=15&G;x<L;)r[x]=r[x++-j],r[x]=r[x++-j],r[x]=r[x++-j],r[x]=r[x++-j];x=L}}else r[x++]=D}}else{7&d&&(d+=8-(7&d));const I=4+(d>>>3),D=s[I-4]|s[I-3]<<8;a&&(r=i.H.W(r,x+D)),r.set(new c(s.buffer,s.byteOffset+I,D),x),d=I+D<<3,x+=D}return r.length==x?r:r.slice(0,x)},i.H.W=function(s,r){const c=s.length;if(r<=c)return s;const p=new Uint8Array(c<<1);return p.set(s,0),p},i.H.R=function(s,r,c,p,C,N){const y=i.H.e,B=i.H.Z;let P=0;for(;P<c;){const S=s[B(p,C)&r];C+=15&S;const M=S>>>4;if(M<=15)N[P]=M,P++;else{let b=0,x=0;16==M?(x=3+y(p,C,2),C+=2,b=N[P-1]):17==M?(x=3+y(p,C,3),C+=3):18==M&&(x=11+y(p,C,7),C+=7);const d=P+x;for(;P<d;)N[P]=b,P++}}return C},i.H.V=function(s,r,c,p){let C=0,N=0;const y=p.length>>>1;for(;N<c;){const B=s[N+r];p[N<<1]=0,p[1+(N<<1)]=B,B>C&&(C=B),N++}for(;N<y;)p[N<<1]=0,p[1+(N<<1)]=0,N++;return C},i.H.n=function(s,r){const c=i.H.m,p=s.length;let C,N,y,B;const P=c.j;for(var S=0;S<=r;S++)P[S]=0;for(S=1;S<p;S+=2)P[s[S]]++;const M=c.K;for(C=0,P[0]=0,N=1;N<=r;N++)C=C+P[N-1]<<1,M[N]=C;for(y=0;y<p;y+=2)B=s[y+1],0!=B&&(s[y]=M[B],M[B]++)},i.H.A=function(s,r,c){const p=s.length,C=i.H.m.r;for(let N=0;N<p;N+=2)if(0!=s[N+1]){const B=s[N+1],P=N>>1<<4|B,S=r-B;let M=s[N]<<S;const b=M+(1<<S);for(;M!=b;)c[C[M]>>>15-r]=P,M++}},i.H.l=function(s,r){const c=i.H.m.r,p=15-r;for(let C=0;C<s.length;C+=2)s[C]=c[s[C]<<r-s[C+1]]>>>p},i.H.M=function(s,r,c){const p=r>>>3;s[p]|=c<<=7&r,s[p+1]|=c>>>8},i.H.I=function(s,r,c){const p=r>>>3;s[p]|=c<<=7&r,s[p+1]|=c>>>8,s[p+2]|=c>>>16},i.H.e=function(s,r,c){return(s[r>>>3]|s[1+(r>>>3)]<<8)>>>(7&r)&(1<<c)-1},i.H.b=function(s,r,c){return(s[r>>>3]|s[1+(r>>>3)]<<8|s[2+(r>>>3)]<<16)>>>(7&r)&(1<<c)-1},i.H.Z=function(s,r){return(s[r>>>3]|s[1+(r>>>3)]<<8|s[2+(r>>>3)]<<16)>>>(7&r)},i.H.i=function(s,r){return(s[r>>>3]|s[1+(r>>>3)]<<8|s[2+(r>>>3)]<<16|s[3+(r>>>3)]<<24)>>>(7&r)},i.H.m=function(){const s=Uint16Array,r=Uint32Array;return{K:new s(16),j:new s(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new s(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new r(32),J:new s(512),_:[],h:new s(32),$:[],w:new s(32768),C:[],v:[],d:new s(32768),D:[],u:new s(512),Q:[],r:new s(32768),s:new r(286),Y:new r(30),a:new r(19),t:new r(15e3),k:new s(65536),g:new s(32768)}}(),function(){const s=i.H.m;for(var r=0;r<32768;r++){let p=r;p=(2863311530&p)>>>1|(1431655765&p)<<1,p=(3435973836&p)>>>2|(858993459&p)<<2,p=(4042322160&p)>>>4|(252645135&p)<<4,p=(4278255360&p)>>>8|(16711935&p)<<8,s.r[r]=(p>>>16|p<<16)>>>17}function c(p,C,N){for(;0!=C--;)p.push(0,N)}for(r=0;r<32;r++)s.q[r]=s.S[r]<<3|s.T[r],s.c[r]=s.p[r]<<4|s.z[r];c(s._,144,8),c(s._,112,9),c(s._,24,7),c(s._,8,8),i.H.n(s._,9),i.H.A(s._,9,s.J),i.H.l(s._,9),c(s.$,32,5),i.H.n(s.$,5),i.H.A(s.$,5,s.h),i.H.l(s.$,5),c(s.Q,19,0),c(s.C,286,0),c(s.D,30,0),c(s.v,320,0)}(),i.H.N}();function n(i){return[1,null,3,1,2,null,4][i.ctype]*i.depth}function f(i,s,r,c,p){let C=n(s);const N=Math.ceil(c*C/8);let y,B;C=Math.ceil(C/8);let P=i[r],S=0;if(P>1&&(i[r]=[0,0,1][P-2]),3==P)for(S=C;S<N;S++)i[S+1]=i[S+1]+(i[S+1-C]>>>1)&255;for(let M=0;M<p;M++)if(y=r+M*N,B=y+M+1,P=i[B-1],S=0,0==P)for(;S<N;S++)i[y+S]=i[B+S];else if(1==P){for(;S<C;S++)i[y+S]=i[B+S];for(;S<N;S++)i[y+S]=i[B+S]+i[y+S-C]}else if(2==P)for(;S<N;S++)i[y+S]=i[B+S]+i[y+S-N];else if(3==P){for(;S<C;S++)i[y+S]=i[B+S]+(i[y+S-N]>>>1);for(;S<N;S++)i[y+S]=i[B+S]+(i[y+S-N]+i[y+S-C]>>>1)}else{for(;S<C;S++)i[y+S]=i[B+S]+l(0,i[y+S-N],0);for(;S<N;S++)i[y+S]=i[B+S]+l(i[y+S-C],i[y+S-N],i[y+S-C-N])}return i}function l(i,s,r){const c=i+s-r,p=c-i,C=c-s,N=c-r;return p*p<=C*C&&p*p<=N*N?i:C*C<=N*N?s:r}function v(i,s,r){r.width=g.readUint(i,s),r.height=g.readUint(i,s+=4),r.depth=i[s+=4],s++,r.ctype=i[s],s++,r.compress=i[s],s++,r.filter=i[s],s++,r.interlace=i[s],s++}function E(i,s,r,c,p,C,N,y,B){const P=Math.min(s,p),S=Math.min(r,C);let M=0,b=0;for(let R=0;R<S;R++)for(let h=0;h<P;h++)if(N>=0&&y>=0?(M=R*s+h<<2,b=(y+R)*p+N+h<<2):(M=(-y+R)*s-N+h<<2,b=R*p+h<<2),0==B)c[b]=i[M],c[b+1]=i[M+1],c[b+2]=i[M+2],c[b+3]=i[M+3];else if(1==B){var x=.00392156862745098*i[M+3],d=i[M]*x,u=i[M+1]*x,F=i[M+2]*x,w=c[b+3]*(1/255),_=c[b]*w,k=c[b+1]*w,A=c[b+2]*w;const a=1-x,T=x+w*a,I=0==T?0:1/T;c[b+3]=255*T,c[b+0]=(d+_*a)*I,c[b+1]=(u+k*a)*I,c[b+2]=(F+A*a)*I}else if(2==B)d=i[M],u=i[M+1],F=i[M+2],_=c[b],k=c[b+1],A=c[b+2],(x=i[M+3])==(w=c[b+3])&&d==_&&u==k&&F==A?(c[b]=0,c[b+1]=0,c[b+2]=0,c[b+3]=0):(c[b]=d,c[b+1]=u,c[b+2]=F,c[b+3]=x);else if(3==B){if(d=i[M],u=i[M+1],F=i[M+2],_=c[b],k=c[b+1],A=c[b+2],(x=i[M+3])==(w=c[b+3])&&d==_&&u==k&&F==A)continue;if(x<220&&w>20)return!1}return!0}return{decode:function(s){const r=new Uint8Array(s);let c=8;const p=g,C=p.readUshort,N=p.readUint,y={tabs:{},frames:[]},B=new Uint8Array(r.length);let P,S=0,M=0;const b=[137,80,78,71,13,10,26,10];for(var x=0;x<8;x++)if(r[x]!=b[x])throw"The input is not a PNG file!";for(;c<r.length;){const R=p.readUint(r,c);c+=4;const h=p.readASCII(r,c,4);if(c+=4,"IHDR"==h)v(r,c,y);else if("iCCP"==h){for(var d=c;0!=r[d];)d++;p.readASCII(r,c,d-c);const a=r.slice(d+2,c+R);let T=null;try{T=o(a)}catch{T=e(a)}y.tabs[h]=T}else if("CgBI"==h)y.tabs[h]=r.slice(c,c+4);else if("IDAT"==h){for(x=0;x<R;x++)B[S+x]=r[c+x];S+=R}else if("acTL"==h)y.tabs[h]={num_frames:N(r,c),num_plays:N(r,c+4)},P=new Uint8Array(r.length);else if("fcTL"==h){0!=M&&((A=y.frames[y.frames.length-1]).data=m(y,P.slice(0,M),A.rect.width,A.rect.height),M=0);const a={x:N(r,c+12),y:N(r,c+16),width:N(r,c+4),height:N(r,c+8)};let T=C(r,c+22);T=C(r,c+20)/(0==T?100:T);const I={rect:a,delay:Math.round(1e3*T),dispose:r[c+24],blend:r[c+25]};y.frames.push(I)}else if("fdAT"==h){for(x=0;x<R-4;x++)P[M+x]=r[c+x+4];M+=R-4}else if("pHYs"==h)y.tabs[h]=[p.readUint(r,c),p.readUint(r,c+4),r[c+8]];else if("cHRM"==h)for(y.tabs[h]=[],x=0;x<8;x++)y.tabs[h].push(p.readUint(r,c+4*x));else if("tEXt"==h||"zTXt"==h){null==y.tabs[h]&&(y.tabs[h]={});var u=p.nextZero(r,c),F=p.readASCII(r,c,u-c),w=c+R-u-1;if("tEXt"==h)k=p.readASCII(r,u+1,w);else{var _=o(r.slice(u+2,u+2+w));k=p.readUTF8(_,0,_.length)}y.tabs[h][F]=k}else if("iTXt"==h){null==y.tabs[h]&&(y.tabs[h]={}),u=0,u=p.nextZero(r,d=c),F=p.readASCII(r,d,u-d);const a=r[d=u+1];var k;u=p.nextZero(r,d+=2),p.readASCII(r,d,u-d),u=p.nextZero(r,d=u+1),p.readUTF8(r,d,u-d),w=R-((d=u+1)-c),0==a?k=p.readUTF8(r,d,w):(_=o(r.slice(d,d+w)),k=p.readUTF8(_,0,_.length)),y.tabs[h][F]=k}else if("PLTE"==h)y.tabs[h]=p.readBytes(r,c,R);else if("hIST"==h){const a=y.tabs.PLTE.length/3;for(y.tabs[h]=[],x=0;x<a;x++)y.tabs[h].push(C(r,c+2*x))}else if("tRNS"==h)3==y.ctype?y.tabs[h]=p.readBytes(r,c,R):0==y.ctype?y.tabs[h]=C(r,c):2==y.ctype&&(y.tabs[h]=[C(r,c),C(r,c+2),C(r,c+4)]);else if("gAMA"==h)y.tabs[h]=p.readUint(r,c)/1e5;else if("sRGB"==h)y.tabs[h]=r[c];else if("bKGD"==h)0==y.ctype||4==y.ctype?y.tabs[h]=[C(r,c)]:2==y.ctype||6==y.ctype?y.tabs[h]=[C(r,c),C(r,c+2),C(r,c+4)]:3==y.ctype&&(y.tabs[h]=r[c]);else if("IEND"==h)break;c+=R,p.readUint(r,c),c+=4}var A;return 0!=M&&((A=y.frames[y.frames.length-1]).data=m(y,P.slice(0,M),A.rect.width,A.rect.height)),y.data=m(y,B,y.width,y.height),delete y.compress,delete y.interlace,delete y.filter,y},toRGBA8:function(s){const r=s.width,c=s.height;if(null==s.tabs.acTL)return[U(s.data,r,c,s).buffer];const p=[];null==s.frames[0].data&&(s.frames[0].data=s.data);const C=r*c*4,N=new Uint8Array(C),y=new Uint8Array(C),B=new Uint8Array(C);for(let S=0;S<s.frames.length;S++){const M=s.frames[S],b=M.rect.x,x=M.rect.y,d=M.rect.width,u=M.rect.height,F=U(M.data,d,u,s);if(0!=S)for(var P=0;P<C;P++)B[P]=N[P];if(0==M.blend?E(F,d,u,N,r,c,b,x,0):1==M.blend&&E(F,d,u,N,r,c,b,x,1),p.push(N.buffer.slice(0)),0!=M.dispose)if(1==M.dispose)E(y,d,u,N,r,c,b,x,0);else if(2==M.dispose)for(P=0;P<C;P++)N[P]=B[P]}return p},_paeth:l,_copyTile:E,_bin:g}}();!function(){const{_copyTile:g}=he,{_bin:U}=he,m=he._paeth;var o={table:function(){const d=new Uint32Array(256);for(let u=0;u<256;u++){let F=u;for(let w=0;w<8;w++)1&F?F=3988292384^F>>>1:F>>>=1;d[u]=F}return d}(),update(d,u,F,w){for(let _=0;_<w;_++)d=o.table[255&(d^u[F+_])]^d>>>8;return d},crc:(d,u,F)=>4294967295^o.update(4294967295,d,u,F)};function e(d,u,F,w){u[F]+=d[0]*w>>4,u[F+1]+=d[1]*w>>4,u[F+2]+=d[2]*w>>4,u[F+3]+=d[3]*w>>4}function n(d){return Math.max(0,Math.min(255,d))}function f(d,u){const F=d[0]-u[0],w=d[1]-u[1],_=d[2]-u[2],k=d[3]-u[3];return F*F+w*w+_*_+k*k}function l(d,u,F,w,_,k,A){null==A&&(A=1);const R=w.length,h=[];for(var a=0;a<R;a++){const j=w[a];h.push([j>>>0&255,j>>>8&255,j>>>16&255,j>>>24&255])}for(a=0;a<R;a++){let j=4294967295;for(var T=0,I=0;I<R;I++){var D=f(h[a],h[I]);I!=a&&D<j&&(j=D,T=I)}}const L=new Uint32Array(_.buffer),Q=new Int16Array(u*F*4),$=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(a=0;a<$.length;a++)$[a]=255*(($[a]+.5)/16-.5);for(let j=0;j<F;j++)for(let H=0;H<u;H++){var G;a=4*(j*u+H),G=2!=A?[n(d[a]+Q[a]),n(d[a+1]+Q[a+1]),n(d[a+2]+Q[a+2]),n(d[a+3]+Q[a+3])]:[n(d[a]+(D=$[4*(3&j)+(3&H)])),n(d[a+1]+D),n(d[a+2]+D),n(d[a+3]+D)],T=0;let V=16777215;for(I=0;I<R;I++){const q=f(G,h[I]);q<V&&(V=q,T=I)}const z=h[T],Y=[G[0]-z[0],G[1]-z[1],G[2]-z[2],G[3]-z[3]];1==A&&(H!=u-1&&e(Y,Q,a+4,7),j!=F-1&&(0!=H&&e(Y,Q,a+4*u-4,3),e(Y,Q,a+4*u,5),H!=u-1&&e(Y,Q,a+4*u+4,1))),k[a>>2]=T,L[a>>2]=w[T]}}function v(d,u,F,w,_){null==_&&(_={});const{crc:k}=o,A=U.writeUint,R=U.writeUshort,h=U.writeASCII;let a=8;const T=d.frames.length>1;let I,D=!1,L=33+(T?20:0);if(null!=_.sRGB&&(L+=13),null!=_.pHYs&&(L+=21),null!=_.iCCP&&(I=pako.deflate(_.iCCP),L+=21+I.length+4),3==d.ctype){for(var Q=d.plte.length,$=0;$<Q;$++)d.plte[$]>>>24!=255&&(D=!0);L+=8+3*Q+4+(D?8+1*Q+4:0)}for(var G=0;G<d.frames.length;G++)T&&(L+=38),L+=(z=d.frames[G]).cimg.length+12,0!=G&&(L+=4);L+=12;const j=new Uint8Array(L),H=[137,80,78,71,13,10,26,10];for($=0;$<8;$++)j[$]=H[$];if(A(j,a,13),a+=4,h(j,a,"IHDR"),a+=4,A(j,a,u),a+=4,A(j,a,F),a+=4,j[a]=d.depth,a++,j[a]=d.ctype,a++,j[a]=0,a++,j[a]=0,a++,j[a]=0,a++,A(j,a,k(j,a-17,17)),a+=4,null!=_.sRGB&&(A(j,a,1),a+=4,h(j,a,"sRGB"),a+=4,j[a]=_.sRGB,a++,A(j,a,k(j,a-5,5)),a+=4),null!=_.iCCP){const Y=13+I.length;A(j,a,Y),a+=4,h(j,a,"iCCP"),a+=4,h(j,a,"ICC profile"),a+=11,a+=2,j.set(I,a),a+=I.length,A(j,a,k(j,a-(Y+4),Y+4)),a+=4}if(null!=_.pHYs&&(A(j,a,9),a+=4,h(j,a,"pHYs"),a+=4,A(j,a,_.pHYs[0]),a+=4,A(j,a,_.pHYs[1]),a+=4,j[a]=_.pHYs[2],a++,A(j,a,k(j,a-13,13)),a+=4),T&&(A(j,a,8),a+=4,h(j,a,"acTL"),a+=4,A(j,a,d.frames.length),a+=4,A(j,a,null!=_.loop?_.loop:0),a+=4,A(j,a,k(j,a-12,12)),a+=4),3==d.ctype){for(A(j,a,3*(Q=d.plte.length)),a+=4,h(j,a,"PLTE"),a+=4,$=0;$<Q;$++){const Y=3*$,q=d.plte[$],ne=q>>>8&255,we=q>>>16&255;j[a+Y+0]=255&q,j[a+Y+1]=ne,j[a+Y+2]=we}if(a+=3*Q,A(j,a,k(j,a-3*Q-4,3*Q+4)),a+=4,D){for(A(j,a,Q),a+=4,h(j,a,"tRNS"),a+=4,$=0;$<Q;$++)j[a+$]=d.plte[$]>>>24&255;a+=Q,A(j,a,k(j,a-Q-4,Q+4)),a+=4}}let V=0;for(G=0;G<d.frames.length;G++){var z=d.frames[G];T&&(A(j,a,26),a+=4,h(j,a,"fcTL"),a+=4,A(j,a,V++),a+=4,A(j,a,z.rect.width),a+=4,A(j,a,z.rect.height),a+=4,A(j,a,z.rect.x),a+=4,A(j,a,z.rect.y),a+=4,R(j,a,w[G]),a+=2,R(j,a,1e3),a+=2,j[a]=z.dispose,a++,j[a]=z.blend,a++,A(j,a,k(j,a-30,30)),a+=4);const Y=z.cimg;A(j,a,(Q=Y.length)+(0==G?0:4)),a+=4;const q=a;h(j,a,0==G?"IDAT":"fdAT"),a+=4,0!=G&&(A(j,a,V++),a+=4),j.set(Y,a),a+=Q,A(j,a,k(j,q,a-q)),a+=4}return A(j,a,0),a+=4,h(j,a,"IEND"),a+=4,A(j,a,k(j,a-4,4)),a+=4,j.buffer}function E(d,u,F){for(let w=0;w<d.frames.length;w++){const _=d.frames[w],k=_.rect.height,A=new Uint8Array(k*_.bpl+k);_.cimg=c(_.img,k,_.bpp,_.bpl,A,u,F)}}function i(d,u,F,w,_){const k=_[0],A=_[1],R=_[2],h=_[3],a=_[4],T=_[5];let I=6,D=8,L=255;for(var Q=0;Q<d.length;Q++){const oe=new Uint8Array(d[Q]);for(var $=oe.length,G=0;G<$;G+=4)L&=oe[G+3]}const j=255!=L,H=function(J,X,re,ae,ee,ce){const te=[];for(var W=0;W<J.length;W++){const le=new Uint8Array(J[W]),me=new Uint32Array(le.buffer);var ue;let de=0,Ae=0,be=X,Ce=re,ze=ae?1:0;if(0!=W){const Vt=ce||ae||1==W||0!=te[W-2].dispose?1:2;let qe=0,ft=1e9;for(let xe=0;xe<Vt;xe++){var Fe=new Uint8Array(J[W-1-xe]);const Jt=new Uint32Array(J[W-1-xe]);let ye=X,Ee=re,je=-1,Pe=-1;for(let Ie=0;Ie<re;Ie++)for(let Ue=0;Ue<X;Ue++)me[se=Ie*X+Ue]!=Jt[se]&&(Ue<ye&&(ye=Ue),Ue>je&&(je=Ue),Ie<Ee&&(Ee=Ie),Ie>Pe&&(Pe=Ie));-1==je&&(ye=Ee=je=Pe=0),ee&&(1==(1&ye)&&ye--,1==(1&Ee)&&Ee--);const ct=(je-ye+1)*(Pe-Ee+1);ct<ft&&(ft=ct,qe=xe,de=ye,Ae=Ee,be=je-ye+1,Ce=Pe-Ee+1)}Fe=new Uint8Array(J[W-1-qe]),1==qe&&(te[W-1].dispose=2),ue=new Uint8Array(be*Ce*4),g(Fe,X,re,ue,be,Ce,-de,-Ae,0),ze=g(le,X,re,ue,be,Ce,-de,-Ae,3)?1:0,1==ze?r(le,X,re,ue,{x:de,y:Ae,width:be,height:Ce}):g(le,X,re,ue,be,Ce,-de,-Ae,0)}else ue=le.slice(0);te.push({rect:{x:de,y:Ae,width:be,height:Ce},img:ue,blend:ze,dispose:0})}if(ae)for(W=0;W<te.length;W++){if(1==(ke=te[W]).blend)continue;const le=ke.rect,me=te[W-1].rect,de=Math.min(le.x,me.x),Ae=Math.min(le.y,me.y),be={x:de,y:Ae,width:Math.max(le.x+le.width,me.x+me.width)-de,height:Math.max(le.y+le.height,me.y+me.height)-Ae};te[W-1].dispose=1,W-1!=0&&s(J,X,re,te,W-1,be,ee),s(J,X,re,te,W,be,ee)}let $e=0;if(1!=J.length)for(var se=0;se<te.length;se++){var ke;$e+=(ke=te[se]).rect.width*ke.rect.height}return te}(d,u,F,k,A,R),V={},z=[],Y=[];if(0!=w){const oe=[];for(G=0;G<H.length;G++)oe.push(H[G].img.buffer);const X=C(function(ee){let ce=0;for(var te=0;te<ee.length;te++)ce+=ee[te].byteLength;const W=new Uint8Array(ce);let ue=0;for(te=0;te<ee.length;te++){const Fe=new Uint8Array(ee[te]),$e=Fe.length;for(let se=0;se<$e;se+=4){let ke=Fe[se],le=Fe[se+1],me=Fe[se+2];const de=Fe[se+3];0==de&&(ke=le=me=0),W[ue+se]=ke,W[ue+se+1]=le,W[ue+se+2]=me,W[ue+se+3]=de}ue+=$e}return W.buffer}(oe),w);for(G=0;G<X.plte.length;G++)z.push(X.plte[G].est.rgba);let re=0;for(G=0;G<H.length;G++){const ae=(Z=H[G]).img.length;var q=new Uint8Array(X.inds.buffer,re>>2,ae>>2);Y.push(q);const ee=new Uint8Array(X.abuf,re,ae);T&&l(Z.img,Z.rect.width,Z.rect.height,z,ee,q),Z.img.set(ee),re+=ae}}else for(Q=0;Q<H.length;Q++){var Z=H[Q];const oe=new Uint32Array(Z.img.buffer);var ne=Z.rect.width;for($=oe.length,q=new Uint8Array($),Y.push(q),G=0;G<$;G++){const J=oe[G];if(0!=G&&J==oe[G-1])q[G]=q[G-1];else if(G>ne&&J==oe[G-ne])q[G]=q[G-ne];else{let X=V[J];if(null==X&&(V[J]=X=z.length,z.push(J),z.length>=300))break;q[G]=X}}}const we=z.length;for(we<=256&&0==a&&(D=we<=2?1:we<=4?2:we<=16?4:8,D=Math.max(D,h)),Q=0;Q<H.length;Q++){ne=(Z=H[Q]).rect.width;const oe=Z.rect.height;let J=Z.img;new Uint32Array(J.buffer);let X=4*ne,re=4;if(we<=256&&0==a){X=Math.ceil(D*ne/8);var ge=new Uint8Array(X*oe);const ae=Y[Q];for(let ee=0;ee<oe;ee++){G=ee*X;const ce=ee*ne;if(8==D)for(var K=0;K<ne;K++)ge[G+K]=ae[ce+K];else if(4==D)for(K=0;K<ne;K++)ge[G+(K>>1)]|=ae[ce+K]<<4-4*(1&K);else if(2==D)for(K=0;K<ne;K++)ge[G+(K>>2)]|=ae[ce+K]<<6-2*(3&K);else if(1==D)for(K=0;K<ne;K++)ge[G+(K>>3)]|=ae[ce+K]<<7-1*(7&K)}J=ge,I=3,re=1}else if(0==j&&1==H.length){ge=new Uint8Array(ne*oe*3);const ae=ne*oe;for(G=0;G<ae;G++){const ee=3*G,ce=4*G;ge[ee]=J[ce],ge[ee+1]=J[ce+1],ge[ee+2]=J[ce+2]}J=ge,I=2,re=3,X=3*ne}Z.img=J,Z.bpl=X,Z.bpp=re}return{ctype:I,depth:D,plte:z,frames:H}}function s(d,u,F,w,_,k,A){const R=Uint8Array,h=Uint32Array,a=new R(d[_-1]),T=new h(d[_-1]),I=_+1<d.length?new R(d[_+1]):null,D=new R(d[_]),L=new h(D.buffer);let Q=u,$=F,G=-1,j=-1;for(let V=0;V<k.height;V++)for(let z=0;z<k.width;z++){const Y=k.x+z,q=k.y+V,Z=q*u+Y,ne=L[Z];0==ne||0==w[_-1].dispose&&T[Z]==ne&&(null==I||0!=I[4*Z+3])||(Y<Q&&(Q=Y),Y>G&&(G=Y),q<$&&($=q),q>j&&(j=q))}-1==G&&(Q=$=G=j=0),A&&(1==(1&Q)&&Q--,1==(1&$)&&$--);const H=w[_];H.rect=k={x:Q,y:$,width:G-Q+1,height:j-$+1},H.blend=1,H.img=new Uint8Array(k.width*k.height*4),0==w[_-1].dispose?(g(a,u,F,H.img,k.width,k.height,-k.x,-k.y,0),r(D,u,F,H.img,k)):g(D,u,F,H.img,k.width,k.height,-k.x,-k.y,0)}function r(d,u,F,w,_){g(d,u,F,w,_.width,_.height,-_.x,-_.y,2)}function c(d,u,F,w,_,k,A){const R=[];let h,a=[0,1,2,3,4];-1!=k?a=[k]:(u*w>5e5||1==F)&&(a=[0]),A&&(h={level:0});const T=jt;for(var I=0;I<a.length;I++){for(let Q=0;Q<u;Q++)p(_,d,Q,w,F,a[I]);R.push(T.deflate(_,h))}let D,L=1e9;for(I=0;I<R.length;I++)R[I].length<L&&(D=I,L=R[I].length);return R[D]}function p(d,u,F,w,_,k){const A=F*w;let R=A+F;if(d[R]=k,R++,0==k)if(w<500)for(var h=0;h<w;h++)d[R+h]=u[A+h];else d.set(new Uint8Array(u.buffer,A,w),R);else if(1==k){for(h=0;h<_;h++)d[R+h]=u[A+h];for(h=_;h<w;h++)d[R+h]=u[A+h]-u[A+h-_]+256&255}else if(0==F){for(h=0;h<_;h++)d[R+h]=u[A+h];if(2==k)for(h=_;h<w;h++)d[R+h]=u[A+h];if(3==k)for(h=_;h<w;h++)d[R+h]=u[A+h]-(u[A+h-_]>>1)+256&255;if(4==k)for(h=_;h<w;h++)d[R+h]=u[A+h]-m(u[A+h-_],0,0)+256&255}else{if(2==k)for(h=0;h<w;h++)d[R+h]=u[A+h]+256-u[A+h-w]&255;if(3==k){for(h=0;h<_;h++)d[R+h]=u[A+h]+256-(u[A+h-w]>>1)&255;for(h=_;h<w;h++)d[R+h]=u[A+h]+256-(u[A+h-w]+u[A+h-_]>>1)&255}if(4==k){for(h=0;h<_;h++)d[R+h]=u[A+h]+256-m(0,u[A+h-w],0)&255;for(h=_;h<w;h++)d[R+h]=u[A+h]+256-m(u[A+h-_],u[A+h-w],u[A+h-_-w])&255}}}function C(d,u){const F=new Uint8Array(d),w=F.slice(0),_=new Uint32Array(w.buffer),k=N(w,u),A=k[0],R=k[1],h=F.length,a=new Uint8Array(h>>2);let T;if(F.length<2e7)for(var I=0;I<h;I+=4)T=y(A,D=F[I]*(1/255),L=F[I+1]*(1/255),Q=F[I+2]*(1/255),$=F[I+3]*(1/255)),a[I>>2]=T.ind,_[I>>2]=T.est.rgba;else for(I=0;I<h;I+=4){var D=.00392156862745098*F[I],L=F[I+1]*(1/255),Q=F[I+2]*(1/255),$=F[I+3]*(1/255);for(T=A;T.left;)T=B(T.est,D,L,Q,$)<=0?T.left:T.right;a[I>>2]=T.ind,_[I>>2]=T.est.rgba}return{abuf:w.buffer,inds:a,plte:R}}function N(d,u,F){null==F&&(F=1e-4);const w=new Uint32Array(d.buffer),_={i0:0,i1:d.length,bst:null,est:null,tdst:0,left:null,right:null};_.bst=M(d,_.i0,_.i1),_.est=b(_.bst);const k=[_];for(;k.length<u;){let R=0,h=0;for(var A=0;A<k.length;A++)k[A].est.L>R&&(R=k[A].est.L,h=A);if(R<F)break;const a=k[h],T=P(d,w,a.i0,a.i1,a.est.e,a.est.eMq255);if(a.i0>=T||a.i1<=T){a.est.L=0;continue}const I={i0:a.i0,i1:T,bst:null,est:null,tdst:0,left:null,right:null};I.bst=M(d,I.i0,I.i1),I.est=b(I.bst);const D={i0:T,i1:a.i1,bst:null,est:null,tdst:0,left:null,right:null};for(D.bst={R:[],m:[],N:a.bst.N-I.bst.N},A=0;A<16;A++)D.bst.R[A]=a.bst.R[A]-I.bst.R[A];for(A=0;A<4;A++)D.bst.m[A]=a.bst.m[A]-I.bst.m[A];D.est=b(D.bst),a.left=I,a.right=D,k[h]=I,k.push(D)}for(k.sort((R,h)=>h.bst.N-R.bst.N),A=0;A<k.length;A++)k[A].ind=A;return[_,k]}function y(d,u,F,w,_){if(null==d.left)return d.tdst=function(I,D,L,Q,$){const G=D-I[0],j=L-I[1],H=Q-I[2],V=$-I[3];return G*G+j*j+H*H+V*V}(d.est.q,u,F,w,_),d;const k=B(d.est,u,F,w,_);let A=d.left,R=d.right;k>0&&(A=d.right,R=d.left);const h=y(A,u,F,w,_);if(h.tdst<=k*k)return h;const a=y(R,u,F,w,_);return a.tdst<h.tdst?a:h}function B(d,u,F,w,_){const{e:k}=d;return k[0]*u+k[1]*F+k[2]*w+k[3]*_-d.eMq}function P(d,u,F,w,_,k){for(w-=4;F<w;){for(;S(d,F,_)<=k;)F+=4;for(;S(d,w,_)>k;)w-=4;if(F>=w)break;const A=u[F>>2];u[F>>2]=u[w>>2],u[w>>2]=A,F+=4,w-=4}for(;S(d,F,_)>k;)F-=4;return F+4}function S(d,u,F){return d[u]*F[0]+d[u+1]*F[1]+d[u+2]*F[2]+d[u+3]*F[3]}function M(d,u,F){const w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],_=[0,0,0,0],k=F-u>>2;for(let A=u;A<F;A+=4){const R=.00392156862745098*d[A],h=d[A+1]*(1/255),a=d[A+2]*(1/255),T=d[A+3]*(1/255);_[0]+=R,_[1]+=h,_[2]+=a,_[3]+=T,w[0]+=R*R,w[1]+=R*h,w[2]+=R*a,w[3]+=R*T,w[5]+=h*h,w[6]+=h*a,w[7]+=h*T,w[10]+=a*a,w[11]+=a*T,w[15]+=T*T}return w[4]=w[1],w[8]=w[2],w[9]=w[6],w[12]=w[3],w[13]=w[7],w[14]=w[11],{R:w,m:_,N:k}}function b(d){const{R:u}=d,{m:F}=d,{N:w}=d,_=F[0],k=F[1],A=F[2],R=F[3],h=0==w?0:1/w,a=[u[0]-_*_*h,u[1]-_*k*h,u[2]-_*A*h,u[3]-_*R*h,u[4]-k*_*h,u[5]-k*k*h,u[6]-k*A*h,u[7]-k*R*h,u[8]-A*_*h,u[9]-A*k*h,u[10]-A*A*h,u[11]-A*R*h,u[12]-R*_*h,u[13]-R*k*h,u[14]-R*A*h,u[15]-R*R*h],T=a,I=x;let D=[Math.random(),Math.random(),Math.random(),Math.random()],L=0,Q=0;if(0!=w)for(let G=0;G<16&&(D=I.multVec(T,D),Q=Math.sqrt(I.dot(D,D)),D=I.sml(1/Q,D),!(0!=G&&Math.abs(Q-L)<1e-9));G++)L=Q;const $=[_*h,k*h,A*h,R*h];return{Cov:a,q:$,e:D,L,eMq255:I.dot(I.sml(255,$),D),eMq:I.dot(D,$),rgba:(Math.round(255*$[3])<<24|Math.round(255*$[2])<<16|Math.round(255*$[1])<<8|Math.round(255*$[0])<<0)>>>0}}var x={multVec:(d,u)=>[d[0]*u[0]+d[1]*u[1]+d[2]*u[2]+d[3]*u[3],d[4]*u[0]+d[5]*u[1]+d[6]*u[2]+d[7]*u[3],d[8]*u[0]+d[9]*u[1]+d[10]*u[2]+d[11]*u[3],d[12]*u[0]+d[13]*u[1]+d[14]*u[2]+d[15]*u[3]],dot:(d,u)=>d[0]*u[0]+d[1]*u[1]+d[2]*u[2]+d[3]*u[3],sml:(d,u)=>[d*u[0],d*u[1],d*u[2],d*u[3]]};he.encode=function(u,F,w,_,k,A,R){null==_&&(_=0),null==R&&(R=!1);const h=i(u,F,w,_,[!1,!1,!1,0,R,!1]);return E(h,-1),v(h,F,w,k,A)},he.encodeLL=function(u,F,w,_,k,A,R,h){const a={ctype:0+(1==_?0:2)+(0==k?0:4),depth:A,frames:[]},T=(_+k)*A,I=T*F;for(let D=0;D<u.length;D++)a.frames.push({rect:{x:0,y:0,width:F,height:w},img:new Uint8Array(u[D]),blend:0,dispose:1,bpp:Math.ceil(T/8),bpl:Math.ceil(I/8)});return E(a,0,!0),v(a,F,w,R,h)},he.encode.compress=i,he.encode.dither=l,he.quantize=C,he.quantize.getKDtree=N,he.quantize.getNearest=y}();const Ke={toArrayBuffer(g,U){const m=g.width,o=g.height,e=m<<2,n=g.getContext("2d").getImageData(0,0,m,o),f=new Uint32Array(n.data.buffer),l=(32*m+31)/32<<2,v=l*o,E=122+v,i=new ArrayBuffer(E),s=new DataView(i),r=1<<20;let c,p,C,N,y=r,B=0,P=0,S=0;function M(d){s.setUint16(P,d,!0),P+=2}function b(d){s.setUint32(P,d,!0),P+=4}function x(d){P+=d}M(19778),b(E),x(4),b(122),b(108),b(m),b(-o>>>0),M(1),M(32),b(3),b(v),b(2835),b(2835),x(8),b(16711680),b(65280),b(255),b(4278190080),b(1466527264),function d(){for(;B<o&&y>0;){for(N=122+B*l,c=0;c<e;)y--,p=f[S++],C=p>>>24,s.setUint32(N+c,p<<8|C),c+=4;B++}S<f.length?(y=r,setTimeout(d,Ke._dly)):U(i)}()},toBlob(g,U){this.toArrayBuffer(g,m=>{U(new Blob([m],{type:"image/bmp"}))})},_dly:9};var fe={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},xt={[fe.CHROME]:16384,[fe.FIREFOX]:11180,[fe.DESKTOP_SAFARI]:16384,[fe.IE]:8192,[fe.IOS]:4096,[fe.ETC]:8192};const Le=typeof window<"u",Ze=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,De=Le&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),Pt=(Le||Ze)&&(De&&De.getOriginalSymbol(window,"File")||typeof File<"u"&&File),et=(Le||Ze)&&(De&&De.getOriginalSymbol(window,"FileReader")||typeof FileReader<"u"&&FileReader);function He(g,U,m=Date.now()){return new Promise(o=>{const e=g.split(","),n=e[0].match(/:(.*?);/)[1],f=globalThis.atob(e[1]);let l=f.length;const v=new Uint8Array(l);for(;l--;)v[l]=f.charCodeAt(l);const E=new Blob([v],{type:n});E.name=U,E.lastModified=m,o(E)})}function tt(g){return new Promise((U,m)=>{const o=new et;o.onload=()=>U(o.result),o.onerror=e=>m(e),o.readAsDataURL(g)})}function nt(g){return new Promise((U,m)=>{const o=new Image;o.onload=()=>U(o),o.onerror=e=>m(e),o.src=g})}function _e(){if(void 0!==_e.cachedResult)return _e.cachedResult;let g=fe.ETC;const{userAgent:U}=navigator;return/Chrom(e|ium)/i.test(U)?g=fe.CHROME:/iP(ad|od|hone)/i.test(U)&&/WebKit/i.test(U)?g=fe.IOS:/Safari/i.test(U)?g=fe.DESKTOP_SAFARI:/Firefox/i.test(U)?g=fe.FIREFOX:(/MSIE/i.test(U)||document.documentMode)&&(g=fe.IE),_e.cachedResult=g}function rt(g,U){const m=_e(),o=xt[m];let e=g,n=U,f=e*n;const l=e>n?n/e:e/n;for(;f>o*o;){const v=(o+e)/2,E=(o+n)/2;v<E?(n=E,e=E*l):(n=v*l,e=v),f=e*n}return{width:e,height:n}}function Me(g,U){let m,o;try{if(m=new OffscreenCanvas(g,U),o=m.getContext("2d"),null===o)throw new Error("getContext of OffscreenCanvas returns null")}catch{m=document.createElement("canvas"),o=m.getContext("2d")}return m.width=g,m.height=U,[m,o]}function it(g,U){const{width:m,height:o}=rt(g.width,g.height),[e,n]=Me(m,o);return U&&/jpe?g/.test(U)&&(n.fillStyle="white",n.fillRect(0,0,e.width,e.height)),n.drawImage(g,0,0,e.width,e.height),e}function Be(){return void 0!==Be.cachedResult||(Be.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&typeof document<"u"&&"ontouchend"in document),Be.cachedResult}function Ge(g,U={}){return new Promise(function(m,o){let e,n;var f=function(){try{return n=it(e,U.fileType||g.type),m([e,n])}catch(v){return o(v)}},l=function(v){try{var E=function(i){try{throw i}catch(s){return o(s)}};try{let i;return tt(g).then(function(s){try{return i=s,nt(i).then(function(r){try{return e=r,function(){try{return f()}catch(c){return o(c)}}()}catch(c){return E(c)}},E)}catch(r){return E(r)}},E)}catch(i){E(i)}}catch(i){return o(i)}};try{if(Be()||[fe.DESKTOP_SAFARI,fe.MOBILE_SAFARI].includes(_e()))throw new Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(g).then(function(v){try{return e=v,f()}catch{return l()}},l)}catch{l()}})}function Qe(g,U,m,o,e=1){return new Promise(function(n,f){let l;if("image/png"===U){let E,i,s;return E=g.getContext("2d"),({data:i}=E.getImageData(0,0,g.width,g.height)),s=he.encode([i.buffer],g.width,g.height,4096*e),l=new Blob([s],{type:U}),l.name=m,l.lastModified=o,v.call(this)}{let E=function(){return v.call(this)};if("image/bmp"===U)return new Promise(i=>Ke.toBlob(g,i)).then(function(i){try{return l=i,l.name=m,l.lastModified=o,E.call(this)}catch(s){return f(s)}}.bind(this),f);{let i=function(){return E.call(this)};if("function"==typeof OffscreenCanvas&&g instanceof OffscreenCanvas)return g.convertToBlob({type:U,quality:e}).then(function(s){try{return l=s,l.name=m,l.lastModified=o,i.call(this)}catch(r){return f(r)}}.bind(this),f);{let s;return s=g.toDataURL(U,e),He(s,m,o).then(function(r){try{return l=r,i.call(this)}catch(c){return f(c)}}.bind(this),f)}}}function v(){return n(l)}})}function pe(g){g.width=0,g.height=0}function Ne(){return new Promise(function(g,U){let m,o,e,n,f;return void 0!==Ne.cachedResult?g(Ne.cachedResult):(m="data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==",He("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(l){try{return o=l,Ge(o).then(function(v){try{return e=v[1],Qe(e,o.type,o.name,o.lastModified).then(function(E){try{return n=E,pe(e),Ge(n).then(function(i){try{return f=i[0],g(Ne.cachedResult=1===f.width&&2===f.height)}catch(s){return U(s)}},U)}catch(i){return U(i)}},U)}catch(E){return U(E)}},U)}catch(v){return U(v)}},U))})}function ot(g){return new Promise((U,m)=>{const o=new et;o.onload=e=>{const n=new DataView(e.target.result);if(65496!=n.getUint16(0,!1))return U(-2);const f=n.byteLength;let l=2;for(;l<f;){if(n.getUint16(l+2,!1)<=8)return U(-1);const v=n.getUint16(l,!1);if(l+=2,65505==v){if(1165519206!=n.getUint32(l+=2,!1))return U(-1);const E=18761==n.getUint16(l+=6,!1);l+=n.getUint32(l+4,E);const i=n.getUint16(l,E);l+=2;for(let s=0;s<i;s++)if(274==n.getUint16(l+12*s,E))return U(n.getUint16(l+12*s+8,E))}else{if(65280!=(65280&v))break;l+=n.getUint16(l,!1)}}return U(-1)},o.onerror=e=>m(e),o.readAsArrayBuffer(g)})}function st(g,U){const{width:m}=g,{height:o}=g,{maxWidthOrHeight:e}=U;let n,f=g;return isFinite(e)&&(m>e||o>e)&&([f,n]=Me(m,o),m>o?(f.width=e,f.height=o/m*e):(f.width=m/o*e,f.height=e),n.drawImage(g,0,0,f.width,f.height),pe(g)),f}function at(g,U){const{width:m}=g,{height:o}=g,[e,n]=Me(m,o);switch(U>4&&U<9?(e.width=o,e.height=m):(e.width=m,e.height=o),U){case 2:n.transform(-1,0,0,1,m,0);break;case 3:n.transform(-1,0,0,-1,m,o);break;case 4:n.transform(1,0,0,-1,0,o);break;case 5:n.transform(0,1,1,0,0,0);break;case 6:n.transform(0,1,-1,0,o,0);break;case 7:n.transform(0,-1,-1,0,o,m);break;case 8:n.transform(0,-1,1,0,0,m)}return n.drawImage(g,0,0,m,o),pe(g),e}function lt(g,U,m=0){return new Promise(function(o,e){let n,f,l,v,E,i,s,r,c,p,C,N,y,B,P,S,M,b,x,d;function u(w=5){if(U.signal&&U.signal.aborted)throw U.signal.reason;n+=w,U.onProgress(Math.min(n,100))}function F(w){if(U.signal&&U.signal.aborted)throw U.signal.reason;n=Math.min(Math.max(w,n),100),U.onProgress(n)}return n=m,f=U.maxIteration||10,l=1024*U.maxSizeMB*1024,u(),Ge(g,U).then(function(w){try{return[,v]=w,u(),E=st(v,U),u(),new Promise(function(_,k){var A;if(!(A=U.exifOrientation))return ot(g).then(function(h){try{return A=h,R.call(this)}catch(a){return k(a)}}.bind(this),k);function R(){return _(A)}return R.call(this)}).then(function(_){try{return i=_,u(),Ne().then(function(k){try{return s=k?E:at(E,i),u(),r=U.initialQuality||1,c=U.fileType||g.type,Qe(s,c,g.name,g.lastModified,r).then(function(A){try{{let h=function(){if(f--&&(P>l||P>y)){let T,I;return T=d?.95*x.width:x.width,I=d?.95*x.height:x.height,[M,b]=Me(T,I),b.drawImage(x,0,0,T,I),r*="image/png"===c?.85:.95,Qe(M,c,g.name,g.lastModified,r).then(function(D){try{return S=D,pe(x),x=M,P=S.size,F(Math.min(99,Math.floor((B-P)/(B-l)*100))),h}catch(L){return e(L)}},e)}return[1]},a=function(){return pe(x),pe(M),pe(E),pe(s),pe(v),F(100),o(S)};return p=A,u(),C=p.size>l,N=p.size>g.size,C||N?(y=g.size,B=p.size,P=B,x=s,d=!U.alwaysKeepResolution&&C,(R=function(T){for(;T;){if(T.then)return void T.then(R,e);try{if(T.pop){if(T.length)return T.pop()?a.call(this):T;T=h}else T=T.call(this)}catch(I){return e(I)}}}.bind(this))(h)):(F(100),o(p));var R}}catch(h){return e(h)}}.bind(this),e)}catch(A){return e(A)}}.bind(this),e)}catch(k){return e(k)}}.bind(this),e)}catch(_){return e(_)}}.bind(this),e)})}let Ye;function ie(g,U){return new Promise(function(m,o){let e,n,f,l,v,E;if(e={...U},f=0,({onProgress:l}=e),e.maxSizeMB=e.maxSizeMB||Number.POSITIVE_INFINITY,v="boolean"!=typeof e.useWebWorker||e.useWebWorker,delete e.useWebWorker,e.onProgress=c=>{f=c,"function"==typeof l&&l(f)},!(g instanceof Blob||g instanceof Pt))return o(new Error("The file given is not an instance of Blob or File"));if(!/^image/.test(g.type))return o(new Error("The file given is not an image"));if(E=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,!v||"function"!=typeof Worker||E)return lt(g,e).then(function(c){try{return n=c,r.call(this)}catch(p){return o(p)}}.bind(this),o);var i=function(){try{return r.call(this)}catch(c){return o(c)}}.bind(this),s=function(c){try{return lt(g,e).then(function(p){try{return n=p,i()}catch(C){return o(C)}},o)}catch(p){return o(p)}};try{return e.libURL=e.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",function Dt(g,U){return new Promise((m,o)=>{Ye||(Ye=function(f){const l=[];return l.push(f),URL.createObjectURL(new Blob(l))}("\nlet scriptImported = false\nself.addEventListener('message', async (e) => {\n  const { file, id, imageCompressionLibUrl, options } = e.data\n  options.onProgress = (progress) => self.postMessage({ progress, id })\n  try {\n    if (!scriptImported) {\n      // console.log('[worker] importScripts', imageCompressionLibUrl)\n      self.importScripts(imageCompressionLibUrl)\n      scriptImported = true\n    }\n    // console.log('[worker] self', self)\n    const compressedFile = await imageCompression(file, options)\n    self.postMessage({ file: compressedFile, id })\n  } catch (e) {\n    // console.error('[worker] error', e)\n    self.postMessage({ error: e.message + '\\n' + e.stack, id })\n  }\n})\n"));const e=new Worker(Ye);e.addEventListener("message",function(f){if(U.signal&&U.signal.aborted)e.terminate();else if(void 0===f.data.progress){if(f.data.error)return o(new Error(f.data.error)),void e.terminate();m(f.data.file),e.terminate()}else U.onProgress(f.data.progress)}),e.addEventListener("error",o),U.signal&&U.signal.addEventListener("abort",()=>{o(U.signal.reason),e.terminate()}),e.postMessage({file:g,imageCompressionLibUrl:U.libURL,options:{...U,onProgress:void 0,signal:void 0}})})}(g,e).then(function(c){try{return n=c,i()}catch{return s()}},s)}catch{s()}function r(){try{n.name=g.name,n.lastModified=g.lastModified}catch{}try{e.preserveExif&&"image/jpeg"===g.type&&(!e.fileType||e.fileType&&e.fileType===g.type)&&(n=Je(g,n))}catch{}return m(n)}})}function Mt(g,U){if(1&g&&(t.j41(0,"option",36),t.EFF(1),t.k0s()),2&g){const m=U.$implicit;t.Y8G("value",m._id),t.R7$(1),t.JRh(m.name)}}function Bt(g,U){if(1&g&&(t.j41(0,"option",36),t.EFF(1),t.k0s()),2&g){const m=U.$implicit;t.Y8G("value",m._id),t.R7$(1),t.JRh(m.name)}}function Gt(g,U){if(1&g&&(t.j41(0,"option",36),t.EFF(1),t.k0s()),2&g){const m=U.$implicit;t.Y8G("value",m._id),t.R7$(1),t.JRh(m.name)}}function Qt(g,U){if(1&g){const m=t.RV6();t.j41(0,"button",45),t.bIt("click",function(){t.eBV(m);const e=t.XpG().index,n=t.XpG(2);return t.Njj(n.removeSkill(e))}),t.EFF(1," \u{1f5d1}\ufe0f Remove "),t.k0s()}}function $t(g,U){if(1&g&&(t.j41(0,"div",37)(1,"div",38)(2,"div",20)(3,"label"),t.EFF(4,"Skill Name"),t.k0s(),t.nrm(5,"input",39),t.k0s(),t.j41(6,"div",40)(7,"label"),t.EFF(8,"Experience (Years)"),t.k0s(),t.nrm(9,"input",41),t.k0s(),t.j41(10,"div",40)(11,"label"),t.EFF(12,"Level"),t.k0s(),t.j41(13,"select",42)(14,"option",26),t.EFF(15,"Select"),t.k0s(),t.j41(16,"option"),t.EFF(17,"Beginner"),t.k0s(),t.j41(18,"option"),t.EFF(19,"Intermediate"),t.k0s(),t.j41(20,"option"),t.EFF(21,"Advanced"),t.k0s()()(),t.j41(22,"div",43),t.DNE(23,Qt,2,0,"button",44),t.k0s()()()),2&g){const m=U.index;t.Y8G("formGroupName",m),t.R7$(23),t.Y8G("ngIf",m>2)}}function Ot(g,U){if(1&g){const m=t.RV6();t.j41(0,"form",17),t.bIt("ngSubmit",function(){t.eBV(m);const e=t.XpG();return t.Njj(e.saveProfile())}),t.j41(1,"h5",18),t.EFF(2,"Personal Information"),t.k0s(),t.j41(3,"div",19)(4,"div",20)(5,"label"),t.EFF(6,"First Name"),t.k0s(),t.nrm(7,"input",21),t.k0s(),t.j41(8,"div",20)(9,"label"),t.EFF(10,"Last Name"),t.k0s(),t.nrm(11,"input",22),t.k0s(),t.j41(12,"div",20)(13,"label"),t.EFF(14,"Mobile No"),t.k0s(),t.nrm(15,"input",23),t.k0s()(),t.j41(16,"h5",24),t.EFF(17,"Address Details"),t.k0s(),t.j41(18,"div",19)(19,"div",20)(20,"label"),t.EFF(21,"Country"),t.k0s(),t.j41(22,"select",25),t.bIt("change",function(){t.eBV(m);const e=t.XpG();return t.Njj(e.onCountryChange())}),t.j41(23,"option",26),t.EFF(24,"Select Country"),t.k0s(),t.DNE(25,Mt,2,2,"option",27),t.k0s()(),t.j41(26,"div",20)(27,"label"),t.EFF(28,"State"),t.k0s(),t.j41(29,"select",28),t.bIt("change",function(){t.eBV(m);const e=t.XpG();return t.Njj(e.onStateChange())}),t.j41(30,"option",26),t.EFF(31,"Select State"),t.k0s(),t.DNE(32,Bt,2,2,"option",27),t.k0s()(),t.j41(33,"div",20)(34,"label"),t.EFF(35,"City"),t.k0s(),t.j41(36,"select",29)(37,"option",26),t.EFF(38,"Select City"),t.k0s(),t.DNE(39,Gt,2,2,"option",27),t.k0s()()(),t.j41(40,"h5",24),t.EFF(41,"Skills "),t.j41(42,"small",30),t.EFF(43,"(Minimum 3 required)"),t.k0s()(),t.j41(44,"div",31),t.DNE(45,$t,24,2,"div",32),t.k0s(),t.j41(46,"button",33),t.bIt("click",function(){t.eBV(m);const e=t.XpG();return t.Njj(e.addSkill())}),t.EFF(47,"\u2795 Add Skill"),t.k0s(),t.j41(48,"div",34)(49,"button",35),t.EFF(50,"\u{1f4be} Save Changes"),t.k0s()()()}if(2&g){const m=t.XpG();t.Y8G("formGroup",m.profileForm),t.R7$(25),t.Y8G("ngForOf",m.countries),t.R7$(4),t.Y8G("disabled",!m.states.length),t.R7$(3),t.Y8G("ngForOf",m.states),t.R7$(4),t.Y8G("disabled",!m.cities.length),t.R7$(3),t.Y8G("ngForOf",m.cities),t.R7$(6),t.Y8G("ngForOf",m.skills.controls)}}function Lt(g,U){if(1&g&&(t.j41(0,"div",52)(1,"strong"),t.EFF(2),t.k0s(),t.j41(3,"span",53),t.EFF(4),t.k0s(),t.j41(5,"small",54),t.EFF(6),t.k0s()()),2&g){const m=U.$implicit;t.R7$(2),t.JRh(m.name),t.R7$(2),t.JRh(m.level),t.R7$(2),t.SpI("(",m.experience," yrs)")}}function Ht(g,U){if(1&g&&(t.j41(0,"div")(1,"div",50),t.DNE(2,Lt,7,3,"div",51),t.k0s()()),2&g){const m=t.XpG(2);t.R7$(2),t.Y8G("ngForOf",m.userProfile.skills)}}function Yt(g,U){1&g&&(t.j41(0,"p",30),t.EFF(1,"No skills added yet."),t.k0s())}function zt(g,U){if(1&g&&(t.j41(0,"div",46)(1,"h5",24),t.EFF(2,"\u{1f4cd} Address"),t.k0s(),t.j41(3,"div",47)(4,"div",20)(5,"strong"),t.EFF(6,"Country:"),t.k0s(),t.EFF(7),t.k0s(),t.j41(8,"div",20)(9,"strong"),t.EFF(10,"State:"),t.k0s(),t.EFF(11),t.k0s(),t.j41(12,"div",20)(13,"strong"),t.EFF(14,"City:"),t.k0s(),t.EFF(15),t.k0s()(),t.j41(16,"h5",24),t.EFF(17,"\u{1f4bc} Skills"),t.k0s(),t.DNE(18,Ht,3,1,"div",48),t.DNE(19,Yt,2,0,"ng-template",null,49,t.C5r),t.k0s()),2&g){const m=t.sdS(20),o=t.XpG();t.R7$(7),t.SpI(" ",(null==o.userProfile||null==o.userProfile.country?null:o.userProfile.country.name)||"N/A",""),t.R7$(4),t.SpI(" ",(null==o.userProfile||null==o.userProfile.state?null:o.userProfile.state.name)||"N/A",""),t.R7$(4),t.SpI(" ",(null==o.userProfile||null==o.userProfile.city?null:o.userProfile.city.name)||"N/A",""),t.R7$(3),t.Y8G("ngIf",null==o.userProfile||null==o.userProfile.skills?null:o.userProfile.skills.length)("ngIfElse",m)}}ie.getDataUrlFromFile=tt,ie.getFilefromDataUrl=He,ie.loadImage=nt,ie.drawImageInCanvas=it,ie.drawFileInCanvas=Ge,ie.canvasToFile=Qe,ie.getExifOrientation=ot,ie.handleMaxWidthOrHeight=st,ie.followExifOrientation=at,ie.cleanupCanvasMemory=pe,ie.isAutoOrientationInBrowser=Ne,ie.approximateBelowMaximumCanvasSizeOfBrowser=rt,ie.copyExifWithoutOrientation=Je,ie.getBrowserName=_e,ie.version="2.0.2";const qt=[{path:"",component:ut},{path:"login",component:vt},{path:"register",component:Ut},{path:"profile",component:(()=>{class g{constructor(m,o,e,n){this.fb=m,this.authService=o,this.commonHttp=e,this.notify=n,this.isEditMode=!1,this.profileImageUrl="https://cdn-icons-png.flaticon.com/512/3135/3135715.png",this.imageError="",this.countries=[],this.states=[],this.cities=[],this.userProfile={}}ngOnInit(){this.loadCountries(),this.fetchProfile()}fetchProfile(){this.commonHttp.get("user/profile").subscribe(m=>{const o=m.user;this.userProfile=o,this.initializeForm(o),o.country?._id&&this.loadStates(o.country._id),o.state?._id&&this.loadCities(o.state._id),this.profileImageUrl=o.profileImage?.dataUrl||"https://cdn-icons-png.flaticon.com/512/3135/3135715.png",this.authService.setUserProfile(o)})}initializeForm(m){for(this.profileForm=this.fb.group({firstName:[m.firstName,O.k0.required],lastName:[m.lastName,O.k0.required],mobileNo:[m.mobileNo,O.k0.required],emailId:[m.emailId],country:[m.country?._id],state:[m.state?._id],city:[m.city?._id],skills:this.fb.array([])}),m.skills?.length&&m.skills.forEach(o=>{this.skills.push(this.createSkillGroup(o))});this.skills.length<3;)this.addSkill()}get skills(){return this.profileForm.get("skills")}createSkillGroup(m={name:"",experience:"",level:""}){return this.fb.group({name:[m.name,O.k0.required],experience:[m.experience,[O.k0.required,O.k0.min(0)]],level:[m.level,O.k0.required]})}addSkill(){this.skills.push(this.createSkillGroup())}removeSkill(m){this.skills.length>3&&this.skills.removeAt(m)}toggleEdit(){this.isEditMode=!this.isEditMode}onCountryChange(){const m=this.profileForm.value.country;this.profileForm.patchValue({state:"",city:""}),this.states=[],this.cities=[],m&&this.loadStates(m)}onStateChange(){const m=this.profileForm.value.state;this.profileForm.patchValue({city:""}),this.cities=[],m&&this.loadCities(m)}loadCountries(){this.commonHttp.get("address/countries").subscribe(m=>{this.countries=m})}loadStates(m){this.commonHttp.get(`address/states/${m}`).subscribe(o=>{this.states=o})}loadCities(m){this.commonHttp.get(`address/cities/${m}`).subscribe(o=>{this.cities=o})}saveProfile(){this.profileForm.invalid||this.commonHttp.put("user/updateUserProfile",{firstName:this.profileForm.value.firstName,lastName:this.profileForm.value.lastName,mobileNo:this.profileForm.value.mobileNo,skills:this.profileForm.value.skills,countryId:this.profileForm.value.country,stateId:this.profileForm.value.state,cityId:this.profileForm.value.city}).subscribe({next:()=>{this.isEditMode=!1,this.fetchProfile(),this.notify.showSuccess("Profile updated successfully!")},error:()=>{this.notify.showError("Failed to update profile")}})}onImageSelected(m){const o=m.target.files?.[0];o&&(["image/jpeg","image/jpg","image/png","image/gif"].includes(o.type)?o.size>10485760?this.notify.showError("Image size should be less than 10MB"):ie(o,{maxSizeMB:1,maxWidthOrHeight:500,useWebWorker:!0}).then(f=>{console.log("Original size:",(o.size/1024).toFixed(2),"KB"),console.log("Compressed size:",(f.size/1024).toFixed(2),"KB"),this.uploadImage(f)}).catch(f=>{console.error(f),this.notify.showError("Image compression failed")}):this.notify.showError("Only JPG, JPEG, GIF or PNG images are allowed"))}uploadImage(m){const o=new FormData;o.append("profileImage",m),this.commonHttp.post("user/uploadProfile",o).subscribe({next:e=>{this.notify.showSuccess("Profile image updated successfully!"),this.fetchProfile()},error:e=>{console.error(e),this.notify.showError(e.error?.message||"Image upload failed")}})}static{this.\u0275fac=function(o){return new(o||g)(t.rXU(O.ok),t.rXU(We.u),t.rXU(Oe.N),t.rXU(Ve.S))}}static{this.\u0275cmp=t.VBU({type:g,selectors:[["app-profile"]],decls:22,vars:8,consts:[[1,"container","mt-4"],[1,"card","shadow-lg","rounded-4","p-4","border-0"],[1,"d-flex","align-items-center","justify-content-between","flex-wrap","mb-4"],[1,"d-flex","align-items-center","flex-wrap","gap-3"],[1,"position-relative","d-inline-block"],["alt","Profile","width","100","height","100",1,"rounded-circle","border","shadow",3,"src"],[1,"upload-icon"],[1,"bi","bi-camera-fill"],["type","file","hidden","",3,"change"],[1,"mb-1","text-capitalize","fw-semibold"],[1,"mb-1","text-muted"],[1,"bi","bi-envelope","me-2"],[1,"mb-0","text-muted"],[1,"bi","bi-telephone","me-2"],[1,"btn","btn-outline-primary","mt-3","mt-md-0",3,"click"],[3,"formGroup","ngSubmit",4,"ngIf"],["class","mt-4",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"mb-3","fw-semibold"],[1,"row","mb-3"],[1,"col-md-4"],["formControlName","firstName",1,"form-control"],["formControlName","lastName",1,"form-control"],["formControlName","mobileNo",1,"form-control"],[1,"fw-semibold","mb-3"],["formControlName","country",1,"form-select",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","state",1,"form-select",3,"disabled","change"],["formControlName","city",1,"form-select",3,"disabled"],[1,"text-muted"],["formArrayName","skills"],["class","border rounded-3 p-3 mb-3 bg-light",3,"formGroupName",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-outline-secondary","btn-sm","mb-3",3,"click"],[1,"text-end"],["type","submit",1,"btn","btn-success"],[3,"value"],[1,"border","rounded-3","p-3","mb-3","bg-light",3,"formGroupName"],[1,"row","g-3","align-items-end"],["formControlName","name",1,"form-control"],[1,"col-md-3"],["type","number","min","0","formControlName","experience",1,"form-control"],["formControlName","level",1,"form-select"],[1,"col-md-2","text-end"],["class","btn btn-danger btn-sm mt-2","type","button",3,"click",4,"ngIf"],["type","button",1,"btn","btn-danger","btn-sm","mt-2",3,"click"],[1,"mt-4"],[1,"row","mb-4"],[4,"ngIf","ngIfElse"],["noSkills",""],[1,"d-flex","flex-wrap","gap-2"],["class","badge bg-light text-dark border shadow-sm p-2",4,"ngFor","ngForOf"],[1,"badge","bg-light","text-dark","border","shadow-sm","p-2"],[1,"badge","bg-primary","ms-2"],[1,"text-muted","ms-2"]],template:function(o,e){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t.nrm(5,"img",5),t.j41(6,"label",6),t.nrm(7,"i",7),t.j41(8,"input",8),t.bIt("change",function(f){return e.onImageSelected(f)}),t.k0s()()(),t.j41(9,"div")(10,"h3",9),t.EFF(11),t.k0s(),t.j41(12,"p",10),t.nrm(13,"i",11),t.EFF(14),t.k0s(),t.j41(15,"p",12),t.nrm(16,"i",13),t.EFF(17),t.k0s()()(),t.j41(18,"button",14),t.bIt("click",function(){return e.toggleEdit()}),t.EFF(19),t.k0s()(),t.DNE(20,Ot,51,7,"form",15),t.DNE(21,zt,21,5,"div",16),t.k0s()()),2&o&&(t.R7$(5),t.Y8G("src",e.profileImageUrl,t.B4B),t.R7$(6),t.Lme("",null==e.userProfile?null:e.userProfile.firstName," ",null==e.userProfile?null:e.userProfile.lastName,""),t.R7$(3),t.JRh(null==e.userProfile?null:e.userProfile.emailId),t.R7$(3),t.SpI("+91 ",null==e.userProfile?null:e.userProfile.mobileNo,""),t.R7$(2),t.SpI(" ",e.isEditMode?"\u274c Cancel":"\u270f\ufe0f Edit Profile"," "),t.R7$(1),t.Y8G("ngIf",e.isEditMode),t.R7$(1),t.Y8G("ngIf",!e.isEditMode))},dependencies:[Re.Sq,Re.bT,O.qT,O.xH,O.y7,O.me,O.Q0,O.wz,O.BC,O.cb,O.VZ,O.j4,O.JD,O.$R,O.v8],styles:[".upload-icon[_ngcontent-%COMP%]{position:absolute;bottom:0;right:0;background:#fff;border:1px solid #ddd;border-radius:50%;padding:4px;cursor:pointer;font-size:14px;color:#007bff;display:flex;align-items:center;justify-content:center;width:24px;height:24px;box-shadow:0 2px 4px #0003;transition:background .3s}.upload-icon[_ngcontent-%COMP%]:hover{background:#f0f0f0}"]})}}return g})()}];let Xt=(()=>{class g{static{this.\u0275fac=function(o){return new(o||g)}}static{this.\u0275mod=t.$C({type:g})}static{this.\u0275inj=t.G2t({imports:[Se.iI.forChild(qt),Se.iI]})}}return g})(),Wt=(()=>{class g{static{this.\u0275fac=function(o){return new(o||g)}}static{this.\u0275mod=t.$C({type:g})}static{this.\u0275inj=t.G2t({imports:[Re.MD,Xt,O.YN,O.X1]})}}return g})()}}]);