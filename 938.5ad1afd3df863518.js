"use strict";(self.webpackChunkangular_test=self.webpackChunkangular_test||[]).push([[938],{7938:($,m,r)=>{r.r(m),r.d(m,{CategoryManagementModule:()=>G});var g=r(177),d=r(1457),s=r(4341),t=r(7705),p=r(3146),y=r(2023),u=r(2556);const h=["categoryModal"];function C(o,c){if(1&o){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td")(6,"button",13),t.bIt("click",function(){const i=t.eBV(e).$implicit,l=t.XpG();return t.Njj(l.openModal("view",i))}),t.nrm(7,"i",14),t.k0s(),t.j41(8,"button",15),t.bIt("click",function(){const i=t.eBV(e).$implicit,l=t.XpG();return t.Njj(l.openModal("edit",i))}),t.nrm(9,"i",16),t.k0s()()()}if(2&o){const e=c.$implicit,n=c.index,a=t.XpG();t.R7$(2),t.JRh((a.currentPage-1)*a.pageSize+n+1),t.R7$(2),t.JRh(e.name)}}function _(o,c){if(1&o){const e=t.RV6();t.j41(0,"li",19)(1,"button",20),t.bIt("click",function(){const i=t.eBV(e).$implicit,l=t.XpG(2);return t.Njj(l.changePage(i))}),t.EFF(2),t.k0s()()}if(2&o){const e=c.$implicit,n=t.XpG(2);t.AVh("active",e===n.currentPage),t.R7$(2),t.JRh(e)}}function b(o,c){if(1&o){const e=t.RV6();t.j41(0,"div",17)(1,"ul",18)(2,"li",19)(3,"button",20),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.changePage(a.currentPage-1))}),t.EFF(4,"\xab"),t.k0s()(),t.DNE(5,_,3,3,"li",21),t.j41(6,"li",19)(7,"button",20),t.bIt("click",function(){t.eBV(e);const a=t.XpG();return t.Njj(a.changePage(a.currentPage+1))}),t.EFF(8,"\xbb"),t.k0s()()()()}if(2&o){const e=t.XpG();t.R7$(2),t.AVh("disabled",1===e.currentPage),t.R7$(3),t.Y8G("ngForOf",e.totalPagesArray()),t.R7$(1),t.AVh("disabled",e.currentPage==e.totalPages)}}function f(o,c){1&o&&(t.j41(0,"div",32),t.EFF(1," Category name is required. "),t.k0s())}function v(o,c){if(1&o){const e=t.RV6();t.j41(0,"div",33)(1,"button",34),t.bIt("click",function(){t.eBV(e);const a=t.XpG().$implicit;return t.Njj(a.dismiss())}),t.EFF(2,"Close"),t.k0s(),t.j41(3,"button",35),t.bIt("click",function(){t.eBV(e);const a=t.XpG().$implicit,i=t.XpG();return t.Njj(i.submitCategory(a))}),t.EFF(4,"Save"),t.k0s()()}}const M=function(o){return{"is-invalid":o}};function F(o,c){if(1&o){const e=t.RV6();t.j41(0,"div",22)(1,"h5",23),t.EFF(2),t.k0s(),t.j41(3,"button",24),t.bIt("click",function(){const i=t.eBV(e).$implicit;return t.Njj(i.dismiss())}),t.k0s()(),t.j41(4,"div",25)(5,"form",26)(6,"div",27)(7,"label",28),t.EFF(8,"Category Name"),t.k0s(),t.nrm(9,"input",29),t.DNE(10,f,2,0,"div",30),t.k0s()()(),t.DNE(11,v,5,0,"div",31)}if(2&o){const e=t.XpG();let n,a;t.Y8G("ngClass","view"===e.modalMode?"bg-info text-white":"bg-primary text-white"),t.R7$(2),t.SpI(" ","create"===e.modalMode?"Create Category":"edit"===e.modalMode?"Edit Category":"View Category"," "),t.R7$(3),t.Y8G("formGroup",e.categoryForm),t.R7$(4),t.Y8G("readonly","view"===e.modalMode)("ngClass",t.eq3(7,M,(null==(n=e.categoryForm.get("name"))?null:n.invalid)&&(null==(n=e.categoryForm.get("name"))?null:n.touched))),t.R7$(1),t.Y8G("ngIf",(null==(a=e.categoryForm.get("name"))?null:a.invalid)&&(null==(a=e.categoryForm.get("name"))?null:a.touched)),t.R7$(1),t.Y8G("ngIf","view"!==e.modalMode)}}const k=[{path:"",component:(()=>{class o{constructor(e,n,a,i){this.commonHttp=e,this.fb=n,this.notify=a,this.modalService=i,this.categories=[],this.currentPage=1,this.pageSize=5,this.modalMode="create",this.selectedCategoryId=null}ngOnInit(){this.getAllCategories(),this.categoryForm=this.fb.group({name:["",s.k0.required]})}getAllCategories(){this.commonHttp.get("test/getAllCategories").subscribe(e=>{this.categories=e.data})}paginatedCategories(){const e=(this.currentPage-1)*this.pageSize;return this.categories.slice(e,e+this.pageSize)}totalPagesArray(){return Array(Math.ceil(this.categories.length/this.pageSize)).fill(0).map((e,n)=>n+1)}get totalPages(){return Math.ceil(this.categories.length/this.pageSize)}changePage(e){e<1||e>this.totalPagesArray().length||(this.currentPage=e)}openModal(e,n=null){this.modalMode=e,this.categoryForm.reset(),this.selectedCategoryId=null,"create"!==e&&n&&(this.selectedCategoryId=n._id,this.categoryForm.patchValue({name:n.name})),this.modalService.open(this.categoryModal,{backdrop:"static"})}submitCategory(e){if(this.categoryForm.invalid)return;const n={name:this.categoryForm.value.name};"create"===this.modalMode?this.commonHttp.post("test/createCategory",n).subscribe(()=>{this.notify.showSuccess("Category is created successfyly"),this.getAllCategories(),e.close()}):"edit"===this.modalMode&&this.selectedCategoryId&&this.commonHttp.put(`test/updateTestCategory/${this.selectedCategoryId}`,n).subscribe(()=>{this.notify.showSuccess("Category is Updated successfyly"),this.getAllCategories(),e.close()})}deleteCategory(e){confirm("Are you sure you want to delete this category?")&&this.commonHttp.delete(`test/deleteTestCategory/${e}`).subscribe(()=>{this.notify.showError("Category is deleted successfyly"),this.getAllCategories()})}static{this.\u0275fac=function(n){return new(n||o)(t.rXU(p.N),t.rXU(s.ok),t.rXU(y.S),t.rXU(u.Bq))}}static{this.\u0275cmp=t.VBU({type:o,selectors:[["app-category-management"]],viewQuery:function(n,a){if(1&n&&t.GBs(h,5),2&n){let i;t.mGM(i=t.lsd())&&(a.categoryModal=i.first)}},decls:22,vars:2,consts:[[1,"card","shadow-sm","rounded-3"],[1,"card-header","bg-primary","text-white","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"btn","btn-sm","btn-light","text-primary","fw-semibold",3,"click"],[1,"bi","bi-plus-circle"],[1,"table-responsive"],[1,"table","table-bordered","table-hover","text-center","align-middle","mt-3"],[1,"table-light"],[2,"width","60px"],[2,"width","160px"],[4,"ngFor","ngForOf"],["class","d-flex justify-content-center mt-3",4,"ngIf"],["categoryModal",""],[1,"btn","btn-sm","btn-info","me-1",3,"click"],[1,"bi","bi-eye"],[1,"btn","btn-sm","btn-warning","me-1",3,"click"],[1,"bi","bi-pencil-square"],[1,"d-flex","justify-content-center","mt-3"],[1,"pagination"],[1,"page-item"],[1,"page-link",3,"click"],["class","page-item",3,"active",4,"ngFor","ngForOf"],[1,"modal-header",3,"ngClass"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"modal-body"],[3,"formGroup"],[1,"mb-3"],[1,"form-label","fw-semibold"],["type","text","formControlName","name",1,"form-control",3,"readonly","ngClass"],["class","invalid-feedback",4,"ngIf"],["class","modal-footer",4,"ngIf"],[1,"invalid-feedback"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(n,a){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"h5",2),t.EFF(3,"Category Management"),t.k0s(),t.j41(4,"button",3),t.bIt("click",function(){return a.openModal("create")}),t.nrm(5,"i",4),t.EFF(6," Create Category "),t.k0s()(),t.j41(7,"div",5)(8,"table",6)(9,"thead",7)(10,"tr")(11,"th",8),t.EFF(12,"S.No"),t.k0s(),t.j41(13,"th"),t.EFF(14,"Category Name"),t.k0s(),t.j41(15,"th",9),t.EFF(16,"Actions"),t.k0s()()(),t.j41(17,"tbody"),t.DNE(18,C,10,2,"tr",10),t.k0s()()(),t.DNE(19,b,9,5,"div",11),t.k0s(),t.DNE(20,F,12,9,"ng-template",null,12,t.C5r)),2&n&&(t.R7$(18),t.Y8G("ngForOf",a.paginatedCategories()),t.R7$(1),t.Y8G("ngIf",a.categories.length>a.pageSize))},dependencies:[g.YU,g.Sq,g.bT,s.qT,s.me,s.BC,s.cb,s.j4,s.JD],styles:[".table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}"]})}}return o})()}];let j=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[d.iI.forChild(k),d.iI]})}}return o})();var x=r(2796);let G=(()=>{class o{static{this.\u0275fac=function(n){return new(n||o)}}static{this.\u0275mod=t.$C({type:o})}static{this.\u0275inj=t.G2t({imports:[g.MD,j,x.ed,s.YN,s.X1,u.UN]})}}return o})()}}]);