"use strict";(self.webpackChunkangular_test=self.webpackChunkangular_test||[]).push([[445],{7445:(S,g,l)=>{l.r(g),l.d(g,{TestManagementModule:()=>D});var d=l(177),m=l(7681),t=l(8699),u=l(3146),f=l(2023),p=l(2796);function _(n,i){1&n&&(t.j41(0,"div",9),t.nrm(1,"div",10),t.k0s())}function b(n,i){if(1&n){const e=t.RV6();t.j41(0,"tr")(1,"td"),t.EFF(2),t.k0s(),t.j41(3,"td"),t.EFF(4),t.k0s(),t.j41(5,"td"),t.EFF(6),t.k0s(),t.j41(7,"td"),t.EFF(8),t.k0s(),t.j41(9,"td")(10,"button",15),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.viewTest(r._id))}),t.nrm(11,"i",16),t.k0s(),t.j41(12,"button",17),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.updateTest(r._id))}),t.nrm(13,"i",18),t.k0s(),t.j41(14,"button",19),t.bIt("click",function(){const r=t.eBV(e).$implicit,c=t.XpG(2);return t.Njj(c.deleteTest(r._id))}),t.nrm(15,"i",20),t.k0s()()()}if(2&n){const e=i.$implicit,s=i.index,o=t.XpG(2);t.R7$(2),t.JRh((o.page-1)*o.limit+s+1),t.R7$(2),t.JRh(e.title),t.R7$(2),t.JRh(e.category),t.R7$(2),t.JRh(null==e.questions?null:e.questions.length)}}const h=function(n,i){return{itemsPerPage:n,currentPage:i}};function v(n,i){if(1&n&&(t.j41(0,"div",11)(1,"table",12)(2,"thead",13)(3,"tr")(4,"th"),t.EFF(5,"SNo"),t.k0s(),t.j41(6,"th"),t.EFF(7,"Title"),t.k0s(),t.j41(8,"th"),t.EFF(9,"Category"),t.k0s(),t.j41(10,"th"),t.EFF(11,"Total Questions"),t.k0s(),t.j41(12,"th"),t.EFF(13,"Actions"),t.k0s()()(),t.j41(14,"tbody"),t.DNE(15,b,16,4,"tr",14),t.nI1(16,"paginate"),t.k0s()()()),2&n){const e=t.XpG();t.R7$(15),t.Y8G("ngForOf",t.i5U(16,1,e.tests,t.l_i(4,h,e.limit,e.page)))}}function T(n,i){1&n&&(t.j41(0,"div",21),t.EFF(1," No tests available. "),t.k0s())}function C(n,i){if(1&n){const e=t.RV6();t.j41(0,"div",22)(1,"pagination-controls",23),t.bIt("pageChange",function(o){t.eBV(e);const r=t.XpG();return t.Njj(r.page=o)}),t.k0s()()}}let F=(()=>{class n{constructor(e,s,o){this.commonHttp=e,this.router=s,this.notify=o,this.tests=[],this.totalTests=0,this.page=1,this.limit=10,this.loading=!1}ngOnInit(){this.getAllTests()}getAllTests(){this.commonHttp.get("test").subscribe(e=>{this.tests=e.data})}goToCreateTest(){this.router.navigate(["/test-management/create-test"])}viewTest(e){this.router.navigate(["/test-management/view-test",e])}updateTest(e){this.router.navigate(["/test-management/create-test"],{queryParams:{testId:e}})}deleteTest(e){confirm("Are you sure you want to delete this test?")&&this.commonHttp.delete(`test/deleteTest/${e}`).subscribe(()=>{this.notify.showSuccess("test is Deleted Successfuly"),this.getAllTests()})}onPageChange(e){this.page=e,this.getAllTests()}static{this.\u0275fac=function(s){return new(s||n)(t.rXU(u.N),t.rXU(m.Ix),t.rXU(f.S))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-test-management"]],decls:11,vars:4,consts:[[1,"card","shadow-sm","rounded-3"],[1,"card-header","bg-primary","text-white","d-flex","justify-content-between","align-items-center"],[1,"mb-0"],[1,"btn","btn-sm","custom-create-btn",3,"click"],[1,"bi","bi-plus-circle"],["class","text-center my-4",4,"ngIf"],["class","table-responsive",4,"ngIf"],["class","alert alert-info text-center",4,"ngIf"],["class","d-flex justify-content-center mt-3",4,"ngIf"],[1,"text-center","my-4"],["role","status",1,"spinner-border","text-primary"],[1,"table-responsive"],[1,"table","table-bordered","table-hover"],[1,"table-light"],[4,"ngFor","ngForOf"],[1,"btn","btn-sm","btn-info","me-1",3,"click"],[1,"bi","bi-eye"],[1,"btn","btn-sm","btn-warning","me-1",3,"click"],[1,"bi","bi-pencil"],[1,"btn","btn-sm","btn-danger",3,"click"],[1,"bi","bi-trash"],[1,"alert","alert-info","text-center"],[1,"d-flex","justify-content-center","mt-3"],[3,"pageChange"]],template:function(s,o){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"h5",2),t.EFF(3,"Test Management"),t.k0s(),t.j41(4,"button",3),t.bIt("click",function(){return o.goToCreateTest()}),t.nrm(5,"i",4),t.EFF(6," Create Test "),t.k0s()(),t.DNE(7,_,2,0,"div",5),t.DNE(8,v,17,7,"div",6),t.DNE(9,T,2,0,"div",7),t.DNE(10,C,2,0,"div",8),t.k0s()),2&s&&(t.R7$(7),t.Y8G("ngIf",o.loading),t.R7$(1),t.Y8G("ngIf",!o.loading&&o.tests.length>0),t.R7$(1),t.Y8G("ngIf",!o.loading&&0===o.tests.length),t.R7$(1),t.Y8G("ngIf",o.tests.length>o.limit))},dependencies:[d.Sq,d.bT,p.ej,p.kf],styles:[".test-management-container[_ngcontent-%COMP%]{background-color:#fff;border-radius:8px;box-shadow:0 0 8px #0000000d}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{vertical-align:middle}.btn-info[_ngcontent-%COMP%]{background-color:#17a2b8;border:none}.btn-warning[_ngcontent-%COMP%]{background-color:#ffc107;border:none}.btn-danger[_ngcontent-%COMP%]{background-color:#dc3545;border:none}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{vertical-align:middle}.card-header[_ngcontent-%COMP%]{font-weight:700}button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{pointer-events:none}.custom-create-btn[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;border:none}.custom-create-btn[_ngcontent-%COMP%]:hover{background-color:#45a049}"]})}}return n})();var a=l(4341);function k(n,i){if(1&n&&(t.j41(0,"option",17),t.EFF(1),t.k0s()),2&n){const e=i.$implicit;t.Y8G("value",e._id),t.R7$(1),t.JRh(e.name)}}function x(n,i){if(1&n){const e=t.RV6();t.j41(0,"div",36),t.nrm(1,"input",37),t.j41(2,"button",21),t.bIt("click",function(){const r=t.eBV(e).index,c=t.XpG(2).index,A=t.XpG();return t.Njj(A.removeOption(c,r))}),t.nrm(3,"i",38),t.k0s()()}if(2&n){const e=i.index;t.R7$(1),t.Mz_("placeholder","Option ",e+1,""),t.Y8G("formControlName",e)}}function y(n,i){if(1&n){const e=t.RV6();t.j41(0,"div")(1,"label",24),t.EFF(2,"Options"),t.k0s(),t.j41(3,"div",32),t.DNE(4,x,4,2,"div",33),t.k0s(),t.j41(5,"button",34),t.bIt("click",function(){t.eBV(e);const o=t.XpG().index,r=t.XpG();return t.Njj(r.addOption(o))}),t.nrm(6,"i",35),t.EFF(7," Add Option "),t.k0s()()}if(2&n){const e=t.XpG().index,s=t.XpG();t.R7$(4),t.Y8G("ngForOf",s.getOptions(e).controls)}}function j(n,i){1&n&&(t.j41(0,"div",39)(1,"label",24),t.EFF(2,"Correct Answers (comma separated)"),t.k0s(),t.nrm(3,"input",40),t.j41(4,"small",41),t.EFF(5,"Separate multiple correct answers with commas."),t.k0s()())}function E(n,i){if(1&n){const e=t.RV6();t.j41(0,"div",18)(1,"div",19)(2,"h5",20),t.EFF(3),t.k0s(),t.j41(4,"button",21),t.bIt("click",function(){const r=t.eBV(e).index,c=t.XpG();return t.Njj(c.removeQuestion(r))}),t.nrm(5,"i",22),t.k0s()(),t.j41(6,"div",23)(7,"label",24),t.EFF(8,"Question Type"),t.k0s(),t.j41(9,"select",25)(10,"option",26),t.EFF(11,"Single Choice"),t.k0s(),t.j41(12,"option",27),t.EFF(13,"Multiple Choice"),t.k0s(),t.j41(14,"option",28),t.EFF(15,"Textarea"),t.k0s()()(),t.j41(16,"div",23)(17,"label",24),t.EFF(18,"Question Text"),t.k0s(),t.nrm(19,"input",29),t.k0s(),t.DNE(20,y,8,1,"div",30),t.DNE(21,j,6,0,"div",31),t.k0s()}if(2&n){const e=i.$implicit,s=i.index;let o,r;t.Y8G("formGroupName",s),t.R7$(3),t.SpI("Question ",s+1,""),t.R7$(17),t.Y8G("ngIf","textarea"!==(null==(o=e.get("type"))?null:o.value)),t.R7$(1),t.Y8G("ngIf","textarea"!==(null==(r=e.get("type"))?null:r.value))}}function w(n,i){1&n&&(t.j41(0,"div",9),t.nrm(1,"div",10),t.k0s())}function O(n,i){if(1&n&&(t.j41(0,"li",24),t.nrm(1,"i",25),t.EFF(2),t.k0s()),2&n){const e=i.$implicit;t.R7$(2),t.SpI(" ",e," ")}}function I(n,i){1&n&&(t.j41(0,"div",26)(1,"span",27),t.EFF(2,"Text Answer"),t.k0s()())}function $(n,i){if(1&n&&(t.j41(0,"div",19)(1,"div",20),t.EFF(2),t.k0s(),t.j41(3,"ul",21),t.DNE(4,O,3,1,"li",22),t.k0s(),t.DNE(5,I,3,0,"div",23),t.k0s()),2&n){const e=i.$implicit,s=i.index;t.R7$(2),t.Lme(" ",s+1,". ",e.questionText," "),t.R7$(2),t.Y8G("ngForOf",e.options),t.R7$(1),t.Y8G("ngIf","textarea"===e.type)}}function G(n,i){if(1&n&&(t.j41(0,"div"),t.DNE(1,$,6,4,"div",18),t.k0s()),2&n){const e=t.XpG(2);t.R7$(1),t.Y8G("ngForOf",e.test.questions)}}function R(n,i){1&n&&(t.j41(0,"div",28),t.EFF(1," No questions found for this test. "),t.k0s())}function N(n,i){if(1&n&&(t.j41(0,"div")(1,"div",11)(2,"h5",12),t.EFF(3,"Title"),t.k0s(),t.j41(4,"p",13),t.EFF(5),t.k0s()(),t.j41(6,"div",11)(7,"h5",12),t.EFF(8,"Category"),t.k0s(),t.j41(9,"span",14),t.EFF(10),t.k0s()(),t.j41(11,"div")(12,"h5",15),t.EFF(13),t.k0s(),t.DNE(14,G,2,1,"div",16),t.DNE(15,R,2,0,"ng-template",null,17,t.C5r),t.k0s()()),2&n){const e=t.sdS(16),s=t.XpG();t.R7$(5),t.JRh(s.test.title),t.R7$(5),t.JRh(null==s.test.category?null:s.test.category.name),t.R7$(3),t.SpI("Questions (",(null==s.test.questions?null:s.test.questions.length)||0,")"),t.R7$(1),t.Y8G("ngIf",(null==s.test.questions?null:s.test.questions.length)>0)("ngIfElse",e)}}function P(n,i){1&n&&(t.j41(0,"div",29),t.EFF(1," Test details not available or invalid Test ID. "),t.k0s())}const V=[{path:"",component:F},{path:"create-test",component:(()=>{class n{constructor(e,s,o,r,c){this.fb=e,this.http=s,this.notify=o,this.router=r,this.route=c,this.categories=[],this.isEditMode=!1,this.testId=null}ngOnInit(){this.testForm=this.fb.group({title:["",a.k0.required],category:["",a.k0.required],questions:this.fb.array([])}),this.loadCategories(),this.testId=this.route.snapshot.queryParamMap.get("testId"),this.isEditMode=!!this.testId,this.isEditMode?this.loadTestDetails(this.testId):this.addQuestion()}get questions(){return this.testForm.get("questions")}addQuestion(e){const s=this.fb.group({type:[e?.type||"radio",a.k0.required],questionText:[e?.questionText||"",a.k0.required],options:this.fb.array([]),correctAnswers:[e?.correctAnswers?.join(", ")||""]});e?.options?.length?e.options.forEach(o=>{s.get("options").push(this.fb.control(o))}):s.get("options").push(this.fb.control("")),this.questions.push(s)}removeQuestion(e){this.questions.removeAt(e)}getOptions(e){return this.questions.at(e).get("options")}addOption(e){this.getOptions(e).push(this.fb.control(""))}removeOption(e,s){this.getOptions(e).removeAt(s)}loadCategories(){this.http.get("test/getAllCategories").subscribe(e=>{this.categories=e.data})}loadTestDetails(e){this.http.get(`test/getSingleTest/${e}`).subscribe({next:s=>{const o=s.data;this.testForm.patchValue({title:o.title,category:o.category?._id||""}),this.questions.clear(),o.questions.forEach(r=>{this.addQuestion({type:r.type,questionText:r.questionText,options:r.options,correctAnswers:r.correctAnswers})})},error:s=>{console.error(s),this.notify.showError("Failed to load test details"),this.router.navigate(["/test-management"])}})}onSubmit(){if(this.testForm.invalid)return void this.testForm.markAllAsTouched();const e={...this.testForm.value};e.questions.forEach(s=>{"textarea"!==s.type&&"string"==typeof s.correctAnswers&&(s.correctAnswers=s.correctAnswers.split(",").map(o=>o.trim())),"textarea"===s.type&&(delete s.options,delete s.correctAnswers)}),this.isEditMode?this.updateTest(e):this.createTest(e)}createTest(e){this.http.post("test/createTest",e).subscribe({next:()=>{this.notify.showSuccess("Test Created Successfully"),this.router.navigate(["/test-management"])},error:s=>console.error(s)})}updateTest(e){this.http.put(`test/updateTest/${this.testId}`,e).subscribe({next:()=>{this.notify.showSuccess("Test Updated Successfully"),this.router.navigate(["/test-management"])},error:s=>console.error(s)})}static{this.\u0275fac=function(s){return new(s||n)(t.rXU(a.ok),t.rXU(u.N),t.rXU(f.S),t.rXU(m.Ix),t.rXU(m.nX))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-create-test"]],decls:24,vars:4,consts:[[1,"container","mt-4"],[1,"card","shadow-lg","p-4"],[1,"mb-4","text-center","fw-bold","text-primary"],[3,"formGroup","ngSubmit"],[1,"mb-3"],[1,"form-label","fw-bold"],["type","text","formControlName","title","placeholder","Enter test title",1,"form-control"],["formControlName","category",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],["formArrayName","questions",1,"mt-4"],["class","border p-3 mb-4 rounded shadow-sm bg-light",3,"formGroupName",4,"ngFor","ngForOf"],[1,"text-center","mt-3"],["type","button",1,"btn","btn-outline-success","btn-lg",3,"click"],[1,"bi","bi-plus-circle-fill"],[1,"text-center","mt-4"],["type","submit",1,"btn","btn-primary","btn-lg","px-5",3,"disabled"],[1,"bi","bi-send-fill"],[3,"value"],[1,"border","p-3","mb-4","rounded","shadow-sm","bg-light",3,"formGroupName"],[1,"d-flex","justify-content-between","align-items-center","mb-2"],[1,"fw-bold","mb-0"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"bi","bi-trash"],[1,"mb-2"],[1,"form-label"],["formControlName","type",1,"form-select"],["value","radio"],["value","checkbox"],["value","textarea"],["type","text","formControlName","questionText","placeholder","Enter question",1,"form-control"],[4,"ngIf"],["class","mt-2",4,"ngIf"],["formArrayName","options"],["class","d-flex mb-2",4,"ngFor","ngForOf"],["type","button",1,"btn","btn-outline-primary","btn-sm","mt-2",3,"click"],[1,"bi","bi-plus-circle"],[1,"d-flex","mb-2"],["type","text",1,"form-control","me-2",3,"formControlName","placeholder"],[1,"bi","bi-x-circle"],[1,"mt-2"],["type","text","formControlName","correctAnswers","placeholder","Correct answers",1,"form-control"],[1,"text-muted"]],template:function(s,o){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"h2",2),t.EFF(3,"\u{1f4dd} Create New Test"),t.k0s(),t.j41(4,"form",3),t.bIt("ngSubmit",function(){return o.onSubmit()}),t.j41(5,"div",4)(6,"label",5),t.EFF(7,"Test Title"),t.k0s(),t.nrm(8,"input",6),t.k0s(),t.j41(9,"div",4)(10,"label",5),t.EFF(11,"Category"),t.k0s(),t.j41(12,"select",7),t.DNE(13,k,2,2,"option",8),t.k0s()(),t.j41(14,"div",9),t.DNE(15,E,22,4,"div",10),t.k0s(),t.j41(16,"div",11)(17,"button",12),t.bIt("click",function(){return o.addQuestion()}),t.nrm(18,"i",13),t.EFF(19," Add Question "),t.k0s()(),t.j41(20,"div",14)(21,"button",15),t.nrm(22,"i",16),t.EFF(23," Submit Test "),t.k0s()()()()()),2&s&&(t.R7$(4),t.Y8G("formGroup",o.testForm),t.R7$(9),t.Y8G("ngForOf",o.categories),t.R7$(2),t.Y8G("ngForOf",o.questions.controls),t.R7$(6),t.Y8G("disabled",o.testForm.invalid))},dependencies:[d.Sq,d.bT,a.qT,a.xH,a.y7,a.me,a.wz,a.BC,a.cb,a.j4,a.JD,a.$R,a.v8],styles:[".container[_ngcontent-%COMP%]{max-width:800px}.card[_ngcontent-%COMP%]{border-radius:15px;background-color:#fff}h2[_ngcontent-%COMP%]{color:#0d6efd}.btn-outline-primary[_ngcontent-%COMP%], .btn-outline-success[_ngcontent-%COMP%]{transition:.3s}.btn-outline-primary[_ngcontent-%COMP%]:hover, .btn-outline-success[_ngcontent-%COMP%]:hover{transform:scale(1.05)}input.form-control[_ngcontent-%COMP%], select.form-select[_ngcontent-%COMP%]{border-radius:8px}.shadow-sm[_ngcontent-%COMP%]{background-color:#f9f9f9}button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-right:5px}"]})}}return n})()},{path:"view-test/:id",component:(()=>{class n{constructor(e,s,o){this.route=e,this.commonHttp=s,this.router=o,this.loading=!1}ngOnInit(){this.testId=this.route.snapshot.paramMap.get("id")||"",this.testId&&this.getTestDetails()}getTestDetails(){this.loading=!0,this.commonHttp.get(`test/getSingleTest/${this.testId}`).subscribe({next:e=>{this.test=e.data,this.loading=!1},error:()=>{this.loading=!1}})}goBack(){this.router.navigate(["/test-management"])}static{this.\u0275fac=function(s){return new(s||n)(t.rXU(m.nX),t.rXU(u.N),t.rXU(m.Ix))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-view-test"]],decls:11,vars:3,consts:[[1,"container","mt-4"],[1,"card","shadow-sm","rounded-4","p-4"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],[1,"fw-bold","text-primary","mb-0"],[1,"btn","btn-outline-primary","btn-sm",3,"click"],[1,"bi","bi-arrow-left"],["class","d-flex justify-content-center my-5",4,"ngIf"],[4,"ngIf"],["class","alert alert-danger text-center mt-4",4,"ngIf"],[1,"d-flex","justify-content-center","my-5"],["role","status",1,"spinner-border","text-primary"],[1,"mb-4"],[1,"text-secondary"],[1,"fs-5","fw-semibold","text-dark"],[1,"badge","bg-primary"],[1,"text-secondary","mb-3"],[4,"ngIf","ngIfElse"],["noQuestions",""],["class","border rounded-3 p-3 mb-3",4,"ngFor","ngForOf"],[1,"border","rounded-3","p-3","mb-3"],[1,"fw-semibold","mb-2","text-dark"],[1,"list-unstyled","ms-3"],["class","mb-1",4,"ngFor","ngForOf"],["class","mt-2",4,"ngIf"],[1,"mb-1"],[1,"bi","bi-dot","text-primary"],[1,"mt-2"],[1,"badge","bg-secondary"],[1,"alert","alert-warning"],[1,"alert","alert-danger","text-center","mt-4"]],template:function(s,o){1&s&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),t.EFF(4,"Test Details"),t.k0s(),t.j41(5,"button",4),t.bIt("click",function(){return o.goBack()}),t.nrm(6,"i",5),t.EFF(7," Back to Test Management "),t.k0s()(),t.DNE(8,w,2,0,"div",6),t.DNE(9,N,17,5,"div",7),t.DNE(10,P,2,0,"div",8),t.k0s()()),2&s&&(t.R7$(8),t.Y8G("ngIf",o.loading),t.R7$(1),t.Y8G("ngIf",o.test&&!o.loading),t.R7$(1),t.Y8G("ngIf",!o.test&&!o.loading))},dependencies:[d.Sq,d.bT],styles:[".card[_ngcontent-%COMP%]{border-radius:1rem}ul[_ngcontent-%COMP%]{padding-left:0}li[_ngcontent-%COMP%]{display:flex;align-items:center}.badge[_ngcontent-%COMP%]{font-size:.9rem}"]})}}return n})()}];let X=(()=>{class n{static{this.\u0275fac=function(s){return new(s||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[m.iI.forChild(V),m.iI]})}}return n})(),D=(()=>{class n{static{this.\u0275fac=function(s){return new(s||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[d.MD,X,a.X1,p.ed]})}}return n})()}}]);