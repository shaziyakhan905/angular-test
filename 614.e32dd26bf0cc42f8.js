"use strict";(self.webpackChunkangular_test=self.webpackChunkangular_test||[]).push([[614],{8614:(M,f,l)=>{l.r(f),l.d(f,{AuthModule:()=>x});var c=l(177),u=l(1457),t=l(7705);let F=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-auth"]],decls:2,vars:0,template:function(n,o){1&n&&(t.j41(0,"p"),t.EFF(1,"auth works!"),t.k0s())}})}}return e})();var r=l(4341),v=l(5844),h=l(3146);function b(e,s){1&e&&(t.j41(0,"small"),t.EFF(1,"Email is required."),t.k0s())}function k(e,s){1&e&&(t.j41(0,"small"),t.EFF(1,"Enter a valid email."),t.k0s())}function E(e,s){if(1&e&&(t.j41(0,"div",12),t.DNE(1,b,2,0,"small",13),t.DNE(2,k,2,0,"small",13),t.k0s()),2&e){const i=t.XpG();t.R7$(1),t.Y8G("ngIf",null==i.f.emailId.errors?null:i.f.emailId.errors.required),t.R7$(1),t.Y8G("ngIf",null==i.f.emailId.errors?null:i.f.emailId.errors.emailId)}}function C(e,s){1&e&&(t.j41(0,"small"),t.EFF(1,"Password is required."),t.k0s())}function I(e,s){if(1&e&&(t.j41(0,"div",12),t.DNE(1,C,2,0,"small",13),t.k0s()),2&e){const i=t.XpG();t.R7$(1),t.Y8G("ngIf",null==i.f.password.errors?null:i.f.password.errors.required)}}function _(e,s){if(1&e&&(t.j41(0,"div",14),t.EFF(1),t.k0s()),2&e){const i=t.XpG();t.R7$(1),t.SpI(" ",i.errorMessage," ")}}let j=(()=>{class e{constructor(i,n,o,a){this.fb=i,this.authService=n,this.commonHttp=o,this.router=a,this.errorMessage=""}ngOnInit(){this.loginForm=this.fb.group({emailId:["",[r.k0.required,r.k0.email]],password:["",[r.k0.required]]})}getUserInfo(){this.commonHttp.get("user/profile").subscribe(i=>{this.authService.setUserProfile(i.user)})}get f(){return this.loginForm.controls}submitLogin(){this.loginForm.invalid?this.loginForm.markAllAsTouched():this.authService.login(this.loginForm.value).subscribe({next:n=>{localStorage.setItem("token",n.token),this.getUserInfo(),this.authService.setUserRole(),this.router.navigate(["/"])},error:n=>{console.error(n),this.errorMessage=n.error?.message||"Login failed"}})}static{this.\u0275fac=function(n){return new(n||e)(t.rXU(r.ok),t.rXU(v.u),t.rXU(h.N),t.rXU(u.Ix))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-login"]],decls:23,vars:4,consts:[[1,"container","d-flex","justify-content-center","align-items-center","min-vh-100"],[1,"card","shadow","p-4",2,"width","400px"],[1,"text-center","mb-4"],[3,"formGroup","ngSubmit"],[1,"mb-3"],["type","email","formControlName","emailId","placeholder","Enter your email",1,"form-control"],["class","text-danger mt-1",4,"ngIf"],["type","password","formControlName","password","placeholder","Enter your password",1,"form-control"],["type","submit",1,"btn","btn-primary","w-100","mt-2"],["class","alert alert-danger mt-3","role","alert",4,"ngIf"],[1,"text-center","mt-3"],["routerLink","/auth/register",1,"text-decoration-none"],[1,"text-danger","mt-1"],[4,"ngIf"],["role","alert",1,"alert","alert-danger","mt-3"]],template:function(n,o){1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"h3",2),t.EFF(3,"\u{1f510} Login to Your Account"),t.k0s(),t.j41(4,"form",3),t.bIt("ngSubmit",function(){return o.submitLogin()}),t.j41(5,"div",4)(6,"label"),t.EFF(7,"Email"),t.k0s(),t.nrm(8,"input",5),t.DNE(9,E,3,2,"div",6),t.k0s(),t.j41(10,"div",4)(11,"label"),t.EFF(12,"Password"),t.k0s(),t.nrm(13,"input",7),t.DNE(14,I,2,1,"div",6),t.k0s(),t.j41(15,"button",8),t.EFF(16,"Login"),t.k0s()(),t.DNE(17,_,2,1,"div",9),t.j41(18,"div",10)(19,"small"),t.EFF(20," Don't have an account? "),t.j41(21,"a",11),t.EFF(22,"Create one"),t.k0s()()()()()),2&n&&(t.R7$(4),t.Y8G("formGroup",o.loginForm),t.R7$(5),t.Y8G("ngIf",o.f.emailId.touched&&o.f.emailId.invalid),t.R7$(5),t.Y8G("ngIf",o.f.password.touched&&o.f.password.invalid),t.R7$(3),t.Y8G("ngIf",o.errorMessage))},dependencies:[c.bT,u.Wk,r.qT,r.me,r.BC,r.cb,r.j4,r.JD]})}}return e})();var y=l(2023);function R(e,s){1&e&&(t.j41(0,"div",26),t.EFF(1," First name is required. "),t.k0s())}function N(e,s){1&e&&(t.j41(0,"div",26),t.EFF(1," Last name is required. "),t.k0s())}function G(e,s){1&e&&(t.j41(0,"div",26),t.EFF(1," Valid email is required. "),t.k0s())}function $(e,s){1&e&&(t.j41(0,"div",26),t.EFF(1," Enter a valid 10-digit mobile number. "),t.k0s())}function D(e,s){1&e&&(t.j41(0,"div",26),t.EFF(1," Password must be at least 4 characters. "),t.k0s())}function S(e,s){if(1&e&&(t.j41(0,"option",27),t.EFF(1),t.k0s()),2&e){const i=s.$implicit;t.Y8G("value",i._id),t.R7$(1),t.JRh(i.name)}}function T(e,s){if(1&e&&(t.j41(0,"option",27),t.EFF(1),t.k0s()),2&e){const i=s.$implicit;t.Y8G("value",i._id),t.R7$(1),t.JRh(i.name)}}function w(e,s){if(1&e&&(t.j41(0,"option",27),t.EFF(1),t.k0s()),2&e){const i=s.$implicit;t.Y8G("value",i._id),t.R7$(1),t.JRh(i.name)}}function Y(e,s){if(1&e&&(t.j41(0,"div",28),t.EFF(1),t.k0s()),2&e){const i=t.XpG();t.R7$(1),t.SpI(" ",i.errorMessage," ")}}const L=[{path:"",component:F},{path:"login",component:j},{path:"register",component:(()=>{class e{constructor(i,n,o,a){this.fb=i,this.http=n,this.router=o,this.natify=a,this.countries=[],this.states=[],this.cities=[],this.errorMessage=""}ngOnInit(){this.buildForm(),this.loadCountries()}buildForm(){this.registrationForm=this.fb.group({firstName:["",r.k0.required],lastName:["",r.k0.required],emailId:["",[r.k0.required,r.k0.email]],mobileNo:["",[r.k0.required,r.k0.pattern(/^[0-9]{10}$/)]],password:["",[r.k0.required,r.k0.minLength(4)]],countryId:["",r.k0.required],stateId:["",r.k0.required],cityId:["",r.k0.required]})}loadCountries(){this.http.get("address/countries").subscribe(i=>{this.countries=i})}onCountryChange(i){const o=i.target.value;this.registrationForm.patchValue({stateId:"",cityId:""}),this.states=[],this.cities=[],o&&this.loadStates(o)}loadStates(i){this.http.get(`address/states/${i}`).subscribe(n=>{this.states=n})}onStateChange(i){const o=i.target.value;this.registrationForm.patchValue({cityId:""}),this.cities=[],o&&this.loadCities(o)}loadCities(i){this.http.get(`address/cities/${i}`).subscribe(n=>{this.cities=n})}onSubmit(){this.registrationForm.invalid?this.registrationForm.markAllAsTouched():this.http.post("createUser",this.registrationForm.value).subscribe({next:()=>{this.natify.showSuccess("Registration successful! Please login."),this.router.navigate(["/auth/login"])},error:i=>{console.error(i),this.errorMessage=i.error?.message||"Registration failed"}})}static{this.\u0275fac=function(n){return new(n||e)(t.rXU(r.ok),t.rXU(h.N),t.rXU(u.Ix),t.rXU(y.S))}}static{this.\u0275cmp=t.VBU({type:e,selectors:[["app-register"]],decls:61,vars:10,consts:[[1,"container","py-5"],[1,"row","justify-content-center"],[1,"col-md-7","col-lg-6"],[1,"card","shadow-lg","rounded-4","p-4"],[1,"text-center","mb-4","text-primary"],[3,"formGroup","ngSubmit"],[1,"row"],[1,"col-md-6","mb-3"],[1,"form-label"],["type","text","formControlName","firstName","placeholder","Enter first name",1,"form-control"],["class","text-danger small",4,"ngIf"],["type","text","formControlName","lastName","placeholder","Enter last name",1,"form-control"],[1,"mb-3"],["type","email","formControlName","emailId","placeholder","Enter email",1,"form-control"],["type","text","formControlName","mobileNo","placeholder","Enter 10-digit mobile number",1,"form-control"],["type","password","formControlName","password","placeholder","Enter password",1,"form-control"],["formControlName","countryId",1,"form-select",3,"change"],["value",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","stateId",1,"form-select",3,"change"],[1,"mb-4"],["formControlName","cityId",1,"form-select"],["class","alert alert-danger",4,"ngIf"],["type","submit",1,"btn","btn-primary","w-100","rounded-pill"],[1,"text-center","mt-3"],["routerLink","/auth/login",1,"text-decoration-none"],[1,"text-danger","small"],[3,"value"],[1,"alert","alert-danger"]],template:function(n,o){if(1&n&&(t.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h3",4),t.EFF(5,"\u{1f4dd} Create Your Account"),t.k0s(),t.j41(6,"form",5),t.bIt("ngSubmit",function(){return o.onSubmit()}),t.j41(7,"div",6)(8,"div",7)(9,"label",8),t.EFF(10,"First Name"),t.k0s(),t.nrm(11,"input",9),t.DNE(12,R,2,0,"div",10),t.k0s(),t.j41(13,"div",7)(14,"label",8),t.EFF(15,"Last Name"),t.k0s(),t.nrm(16,"input",11),t.DNE(17,N,2,0,"div",10),t.k0s()(),t.j41(18,"div",12)(19,"label",8),t.EFF(20,"Email"),t.k0s(),t.nrm(21,"input",13),t.DNE(22,G,2,0,"div",10),t.k0s(),t.j41(23,"div",12)(24,"label",8),t.EFF(25,"Mobile Number"),t.k0s(),t.nrm(26,"input",14),t.DNE(27,$,2,0,"div",10),t.k0s(),t.j41(28,"div",12)(29,"label",8),t.EFF(30,"Password"),t.k0s(),t.nrm(31,"input",15),t.DNE(32,D,2,0,"div",10),t.k0s(),t.j41(33,"div",12)(34,"label",8),t.EFF(35,"Country"),t.k0s(),t.j41(36,"select",16),t.bIt("change",function(m){return o.onCountryChange(m)}),t.j41(37,"option",17),t.EFF(38,"Select Country"),t.k0s(),t.DNE(39,S,2,2,"option",18),t.k0s()(),t.j41(40,"div",12)(41,"label",8),t.EFF(42,"State"),t.k0s(),t.j41(43,"select",19),t.bIt("change",function(m){return o.onStateChange(m)}),t.j41(44,"option",17),t.EFF(45,"Select State"),t.k0s(),t.DNE(46,T,2,2,"option",18),t.k0s()(),t.j41(47,"div",20)(48,"label",8),t.EFF(49,"City"),t.k0s(),t.j41(50,"select",21)(51,"option",17),t.EFF(52,"Select City"),t.k0s(),t.DNE(53,w,2,2,"option",18),t.k0s()(),t.DNE(54,Y,2,1,"div",22),t.j41(55,"button",23),t.EFF(56,"Register"),t.k0s(),t.j41(57,"p",24),t.EFF(58," Already have an account? "),t.j41(59,"a",25),t.EFF(60,"Login here"),t.k0s()()()()()()()),2&n){let a,m,d,p,g;t.R7$(6),t.Y8G("formGroup",o.registrationForm),t.R7$(6),t.Y8G("ngIf",(null==(a=o.registrationForm.get("firstName"))?null:a.touched)&&(null==(a=o.registrationForm.get("firstName"))?null:a.invalid)),t.R7$(5),t.Y8G("ngIf",(null==(m=o.registrationForm.get("lastName"))?null:m.touched)&&(null==(m=o.registrationForm.get("lastName"))?null:m.invalid)),t.R7$(5),t.Y8G("ngIf",(null==(d=o.registrationForm.get("emailId"))?null:d.touched)&&(null==(d=o.registrationForm.get("emailId"))?null:d.invalid)),t.R7$(5),t.Y8G("ngIf",(null==(p=o.registrationForm.get("mobileNo"))?null:p.touched)&&(null==(p=o.registrationForm.get("mobileNo"))?null:p.invalid)),t.R7$(5),t.Y8G("ngIf",(null==(g=o.registrationForm.get("password"))?null:g.touched)&&(null==(g=o.registrationForm.get("password"))?null:g.invalid)),t.R7$(7),t.Y8G("ngForOf",o.countries),t.R7$(7),t.Y8G("ngForOf",o.states),t.R7$(7),t.Y8G("ngForOf",o.cities),t.R7$(1),t.Y8G("ngIf",o.errorMessage)}},dependencies:[c.Sq,c.bT,u.Wk,r.qT,r.xH,r.y7,r.me,r.wz,r.BC,r.cb,r.j4,r.JD]})}}return e})()}];let U=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[u.iI.forChild(L),u.iI]})}}return e})(),x=(()=>{class e{static{this.\u0275fac=function(n){return new(n||e)}}static{this.\u0275mod=t.$C({type:e})}static{this.\u0275inj=t.G2t({imports:[c.MD,U,r.YN,r.X1]})}}return e})()}}]);