"use strict";(self.webpackChunkangular_test=self.webpackChunkangular_test||[]).push([[774],{2774:(B,g,a)=>{a.r(g),a.d(g,{OnlineTestModule:()=>U});var l=a(177),c=a(7681),t=a(8699);let h=(()=>{class s{constructor(e,n){this.router=e,this.route=n,this.showSidebar=!0}ngOnInit(){this.router.events.subscribe(()=>{const e=this.router.url;this.showSidebar=!(e.includes("test-result")||e.includes("test-page"))})}static{this.\u0275fac=function(n){return new(n||s)(t.rXU(c.Ix),t.rXU(c.nX))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-online-test"]],decls:1,vars:0,template:function(n,i){1&n&&t.nrm(0,"router-outlet")},dependencies:[c.n3]})}}return s})();var p=a(3146);function b(s,o){if(1&s){const e=t.RV6();t.j41(0,"div",7)(1,"div",8)(2,"h5",9),t.EFF(3),t.k0s(),t.j41(4,"p",10),t.nrm(5,"i",11),t.j41(6,"strong"),t.EFF(7,"Category:"),t.k0s(),t.EFF(8),t.k0s()(),t.j41(9,"div")(10,"button",12),t.bIt("click",function(){const r=t.eBV(e).$implicit,d=t.XpG(2);return t.Njj(d.goToTest(r._id))}),t.EFF(11," Take Test "),t.k0s()()()}if(2&s){const e=o.$implicit;t.R7$(3),t.JRh(e.title),t.R7$(5),t.SpI(" ",(null==e.category?null:e.category.name)||"N/A"," ")}}function T(s,o){if(1&s&&(t.qex(0),t.j41(1,"div",3)(2,"span",4),t.EFF(3),t.k0s()(),t.j41(4,"div",5),t.DNE(5,b,12,2,"div",6),t.k0s(),t.bVm()),2&s){const e=t.XpG();t.R7$(3),t.SpI(" \u{1f4c2} ",(null==e.tests[0]||null==e.tests[0].category?null:e.tests[0].category.name)||"Category"," Tests "),t.R7$(2),t.Y8G("ngForOf",e.tests)}}function x(s,o){1&s&&(t.j41(0,"div",13),t.EFF(1," No tests found for this category. "),t.k0s())}let v=(()=>{class s{constructor(e,n,i){this.route=e,this.http=n,this.router=i,this.tests=[]}ngOnInit(){this.route.queryParams.subscribe(e=>{const n=e.category;n&&this.fetchTestsByCategory(n)})}fetchTestsByCategory(e){this.http.get(`test/alltestWithCategaries/${e}`).subscribe(n=>{this.tests=n.data})}goToTest(e){this.router.navigate(["/online-test/test-page"],{queryParams:{testId:e}})}static{this.\u0275fac=function(n){return new(n||s)(t.rXU(c.nX),t.rXU(p.N),t.rXU(c.Ix))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-test-list"]],decls:4,vars:2,consts:[[1,"container","py-4"],[4,"ngIf","ngIfElse"],["noTests",""],[1,"mb-4"],[1,"badge","rounded-pill","bg-primary","fs-6","px-3","py-2","shadow-sm"],[1,"d-flex","flex-column","gap-3"],["class","card shadow-sm px-3 py-3 d-flex flex-row justify-content-between align-items-center flex-wrap",4,"ngFor","ngForOf"],[1,"card","shadow-sm","px-3","py-3","d-flex","flex-row","justify-content-between","align-items-center","flex-wrap"],[1,"flex-grow-1","pe-3"],[1,"mb-1"],[1,"mb-0","text-muted"],[1,"bi","bi-tags-fill","me-1","text-secondary"],[1,"btn","btn-primary",3,"click"],[1,"alert","alert-warning","text-center","mt-5"]],template:function(n,i){if(1&n&&(t.j41(0,"div",0),t.DNE(1,T,6,2,"ng-container",1),t.DNE(2,x,2,0,"ng-template",null,2,t.C5r),t.k0s()),2&n){const r=t.sdS(3);t.R7$(1),t.Y8G("ngIf",i.tests.length>0)("ngIfElse",r)}},dependencies:[l.Sq,l.bT],styles:[".card[_ngcontent-%COMP%]{border-radius:10px;transition:box-shadow .2s ease}.card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000014}h5[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#333}.btn[_ngcontent-%COMP%]{min-width:120px;font-weight:500}"]})}}return s})();var u=a(4341);function C(s,o){if(1&s){const e=t.RV6();t.j41(0,"div",11)(1,"input",12),t.bIt("change",function(){const r=t.eBV(e).$implicit,d=t.XpG(2).index,m=t.XpG(3);return t.Njj(m.selectAnswer(d,r))}),t.k0s(),t.j41(2,"label",13),t.EFF(3),t.k0s()()}if(2&s){const e=o.$implicit,n=t.XpG(2).index,i=t.XpG(3);t.R7$(1),t.Y8G("name","q"+n)("value",e)("checked",i.selectedAnswers[n]===e),t.R7$(2),t.JRh(e)}}function F(s,o){if(1&s&&(t.qex(0),t.DNE(1,C,4,4,"div",10),t.bVm()),2&s){const e=t.XpG().$implicit;t.R7$(1),t.Y8G("ngForOf",e.options)}}function y(s,o){if(1&s){const e=t.RV6();t.j41(0,"div",11)(1,"input",14),t.bIt("change",function(){const r=t.eBV(e).$implicit,d=t.XpG(2).index,m=t.XpG(3);return t.Njj(m.toggleCheckbox(d,r))}),t.k0s(),t.j41(2,"label",13),t.EFF(3),t.k0s()()}if(2&s){const e=o.$implicit,n=t.XpG(2).index,i=t.XpG(3);t.R7$(1),t.Y8G("value",e)("checked",null==i.selectedAnswers[n]?null:i.selectedAnswers[n].includes(e)),t.R7$(2),t.JRh(e)}}function k(s,o){if(1&s&&(t.qex(0),t.DNE(1,y,4,3,"div",10),t.bVm()),2&s){const e=t.XpG().$implicit;t.R7$(1),t.Y8G("ngForOf",e.options)}}function I(s,o){if(1&s){const e=t.RV6();t.qex(0),t.j41(1,"textarea",15),t.bIt("ngModelChange",function(i){t.eBV(e);const r=t.XpG().index,d=t.XpG(3);return t.Njj(d.selectedAnswers[r]=i)}),t.k0s(),t.bVm()}if(2&s){const e=t.XpG().index,n=t.XpG(3);t.R7$(1),t.Y8G("ngModel",n.selectedAnswers[e])("name","q"+e)}}function P(s,o){if(1&s&&(t.j41(0,"div",7)(1,"h5",8),t.EFF(2),t.k0s(),t.DNE(3,F,2,1,"ng-container",9),t.DNE(4,k,2,1,"ng-container",9),t.DNE(5,I,2,2,"ng-container",9),t.k0s()),2&s){const e=o.$implicit,n=o.index;t.R7$(2),t.Lme("Q",n+1,". ",e.questionText,""),t.R7$(1),t.Y8G("ngIf","radio"===e.type),t.R7$(1),t.Y8G("ngIf","checkbox"===e.type),t.R7$(1),t.Y8G("ngIf","textarea"===e.type)}}function j(s,o){if(1&s){const e=t.RV6();t.j41(0,"form",4),t.bIt("ngSubmit",function(){t.eBV(e);const i=t.XpG(2);return t.Njj(i.submitTest())}),t.DNE(1,P,6,5,"div",5),t.j41(2,"button",6),t.EFF(3,"Submit Test"),t.k0s()()}if(2&s){const e=t.XpG(2);t.R7$(1),t.Y8G("ngForOf",e.questions),t.R7$(1),t.Y8G("disabled",e.isSubmitDisabled())}}function w(s,o){if(1&s&&(t.j41(0,"div",1)(1,"h2",2),t.EFF(2),t.k0s(),t.DNE(3,j,4,2,"form",3),t.k0s()),2&s){const e=t.XpG();t.R7$(2),t.JRh(e.testData.title),t.R7$(1),t.Y8G("ngIf",""===e.resultStatus)}}let E=(()=>{class s{constructor(e,n,i){this.route=e,this.commonHttpService=n,this.router=i,this.testId="",this.questions=[],this.selectedAnswers=[],this.resultMessage="",this.resultStatus="",this.score=0}ngOnInit(){this.route.queryParams.subscribe(e=>{this.testId=e.testId,this.testId&&this.loadTest()})}loadTest(){this.commonHttpService.get(`test/${this.testId}`).subscribe(e=>{this.testData=e.data.test,this.questions=e.data.questions,console.log(this.questions),this.selectedAnswers=new Array(this.questions.length).fill(null)})}selectAnswer(e,n){this.selectedAnswers[e]=n}toggleCheckbox(e,n){this.selectedAnswers[e]||(this.selectedAnswers[e]=[]);const i=this.selectedAnswers[e].indexOf(n);-1===i?this.selectedAnswers[e].push(n):this.selectedAnswers[e].splice(i,1)}submitTest(){const e=this.questions.map((n,i)=>{const r=this.selectedAnswers[i];return null==r||Array.isArray(r)&&0===r.length?null:{questionId:n._id,selectedAnswers:Array.isArray(r)?r:[r]}}).filter(n=>null!==n);0!==e.length?this.commonHttpService.post(`test/submitTset/${this.testId}`,{answers:e}).subscribe({next:n=>{this.router.navigate(["/online-test/test-result"],{queryParams:{status:"pass"===n.status?"pass":"fail",score:n.score,message:n.message,testId:this.testId}})},error:n=>{this.router.navigate(["/online-test/test-result"],{queryParams:{status:"fail",score:n.error?.score||0,message:n.error?.message||"Unexpected error occurred",testId:this.testId}})}}):alert("Please answer at least one question before submitting.")}isSubmitDisabled(){return 0===this.questions.length||this.selectedAnswers.some(e=>Array.isArray(e)?0===e.length:null==e||""===e)}static{this.\u0275fac=function(n){return new(n||s)(t.rXU(c.nX),t.rXU(p.N),t.rXU(c.Ix))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-test-page"]],decls:1,vars:1,consts:[["class","container py-4",4,"ngIf"],[1,"container","py-4"],[1,"mb-4","text-primary"],[3,"ngSubmit",4,"ngIf"],[3,"ngSubmit"],["class","mb-4 p-3 border rounded shadow-sm bg-white",4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-success","w-100","mt-3",3,"disabled"],[1,"mb-4","p-3","border","rounded","shadow-sm","bg-white"],[1,"mb-3"],[4,"ngIf"],["class","form-check mb-2",4,"ngFor","ngForOf"],[1,"form-check","mb-2"],["type","radio",1,"form-check-input",3,"name","value","checked","change"],[1,"form-check-label"],["type","checkbox",1,"form-check-input",3,"value","checked","change"],["rows","4","placeholder","Type your answer here...",1,"form-control",3,"ngModel","name","ngModelChange"]],template:function(n,i){1&n&&t.DNE(0,w,4,2,"div",0),2&n&&t.Y8G("ngIf",i.testData)},dependencies:[l.Sq,l.bT,u.qT,u.me,u.BC,u.cb,u.vS,u.cV]})}}return s})();function R(s,o){if(1&s&&(t.j41(0,"div")(1,"div",3),t.nrm(2,"img",4),t.j41(3,"div",5),t.EFF(4,"\u{1f389} Hurray! \u{1f389}"),t.k0s()(),t.j41(5,"h2",6),t.EFF(6,"Congratulations!"),t.k0s(),t.j41(7,"p",7),t.EFF(8,"You passed with a score of "),t.j41(9,"strong"),t.EFF(10),t.k0s(),t.EFF(11,"."),t.k0s(),t.j41(12,"p",8),t.EFF(13),t.k0s()()),2&s){const e=t.XpG();t.R7$(10),t.SpI("",e.score,"%"),t.R7$(3),t.JRh(e.message)}}function D(s,o){if(1&s){const e=t.RV6();t.j41(0,"div",9),t.nrm(1,"img",10),t.j41(2,"h2",11),t.EFF(3,"\u{1f613} You didn\u2019t pass"),t.k0s(),t.j41(4,"p",12),t.EFF(5," Your score: "),t.j41(6,"strong"),t.EFF(7),t.k0s(),t.nrm(8,"br"),t.EFF(9," Minimum required: "),t.j41(10,"strong"),t.EFF(11,"80%"),t.k0s()(),t.j41(12,"button",13),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.retakeTest())}),t.EFF(13," \u{1f501} Retake Test "),t.k0s()()}if(2&s){const e=t.XpG();t.R7$(7),t.SpI("",e.score,"%")}}let G=(()=>{class s{constructor(e,n){this.route=e,this.router=n,this.status="",this.score=0,this.testId="",this.message=""}ngOnInit(){this.route.queryParams.subscribe(e=>{console.log(e),this.status=(e.status||"").toLowerCase().trim(),this.score=parseFloat(e.score||"0"),this.message=e.message,this.testId=e.testId||"",console.log("Status:",this.status);const n=JSON.parse(localStorage.getItem("completedTests")||"[]");n.includes(this.testId)||(n.push(this.testId),localStorage.setItem("completedTests",JSON.stringify(n)))})}retakeTest(){this.router.navigate(["/online-test/test-page"],{queryParams:{testId:this.testId}})}static{this.\u0275fac=function(n){return new(n||s)(t.rXU(c.nX),t.rXU(c.Ix))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-test-result"]],decls:4,vars:3,consts:[[1,"container","text-center","py-5","result-container",3,"ngClass"],[4,"ngIf","ngIfElse"],["failTemplate",""],[1,"icon-wrapper"],["src","https://cdn-icons-png.flaticon.com/512/3159/3159066.png","width","120",1,"icon","mb-3"],[1,"blink","hurray-text"],[1,"text-success","fw-bold"],[1,"fs-5"],[1,"text-muted"],[1,"fail-animation-container"],["src","https://cdn-icons-png.flaticon.com/512/166/166527.png","alt","Sad Emoji","width","140",1,"mb-4"],[1,"text-danger","fw-bold","animate__animated","animate__shakeX"],[1,"fs-5","text-muted"],[1,"btn","btn-outline-danger","mt-3","px-4","py-2",3,"click"]],template:function(n,i){if(1&n&&(t.j41(0,"div",0),t.DNE(1,R,14,2,"div",1),t.DNE(2,D,14,1,"ng-template",null,2,t.C5r),t.k0s()),2&n){const r=t.sdS(3);t.Y8G("ngClass",i.status),t.R7$(1),t.Y8G("ngIf","pass"===i.status)("ngIfElse",r)}},dependencies:[l.YU,l.bT],styles:[".result-container[_ngcontent-%COMP%]{border-radius:12px;padding:2rem;animation:_ngcontent-%COMP%_fadeIn .5s ease-in}.result-container.pass[_ngcontent-%COMP%]{background:linear-gradient(135deg,#e0ffe0,#d0f0ff)}.result-container.fail[_ngcontent-%COMP%]{background:linear-gradient(135deg,#ffe0e0,#fff0f0)}.icon-wrapper[_ngcontent-%COMP%]{position:relative;display:inline-block}.hurray-text[_ngcontent-%COMP%]{font-size:1.8rem;color:#28a745;font-weight:700;animation:_ngcontent-%COMP%_blink 1s infinite}@keyframes _ngcontent-%COMP%_blink{0%,to{opacity:1}50%{opacity:.3}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}button[_ngcontent-%COMP%]{transition:all .3s ease}button[_ngcontent-%COMP%]:hover{transform:scale(1.05);background-color:#007bff;color:#fff}.fail-animation-container[_ngcontent-%COMP%]{background:#fff0f0;border-radius:12px;padding:30px;box-shadow:0 0 12px #ff00001a;transition:.3s ease-in-out}.fail-animation-container[_ngcontent-%COMP%]{background-color:#fff0f0;padding:40px 20px;border-radius:12px;box-shadow:0 4px 20px #ff00001a;text-align:center;transition:all .3s ease-in-out}.fail-animation-container[_ngcontent-%COMP%]:hover{transform:translateY(-3px);box-shadow:0 8px 30px #f003}.btn-outline-danger[_ngcontent-%COMP%]{font-weight:500;border-radius:8px}"]})}}return s})();function X(s,o){if(1&s){const e=t.RV6();t.j41(0,"li",6)(1,"button",7),t.bIt("click",function(){const r=t.eBV(e).index,d=t.XpG(2);return t.Njj(d.changePage(r+1))}),t.EFF(2),t.k0s()()}if(2&s){const e=o.index,n=t.XpG(2);t.AVh("active",e+1===n.currentPage),t.R7$(2),t.JRh(e+1)}}function $(s,o){if(1&s){const e=t.RV6();t.j41(0,"div")(1,"button",17),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.startTest(i._id))}),t.EFF(2," \u{1f680} Start Test "),t.k0s()()}}function O(s,o){if(1&s){const e=t.RV6();t.j41(0,"div",18),t.EFF(1," \u2705 Test Completed "),t.k0s(),t.j41(2,"button",19),t.bIt("click",function(){t.eBV(e);const i=t.XpG().$implicit,r=t.XpG(2);return t.Njj(r.startTest(i._id))}),t.EFF(3," \u{1f501} Restart Test "),t.k0s()}}function N(s,o){if(1&s&&(t.j41(0,"div",11)(1,"div",12)(2,"div",13)(3,"div")(4,"h5",14),t.EFF(5),t.k0s()(),t.DNE(6,$,3,0,"div",15),t.DNE(7,O,4,0,"ng-template",null,16,t.C5r),t.k0s()()()),2&s){const e=o.$implicit,n=t.sdS(8),i=t.XpG(2);t.R7$(5),t.SpI("\u{1f4dd} ",e.title,""),t.R7$(1),t.Y8G("ngIf",!i.isTestCompleted(e._id))("ngIfElse",n)}}const S=function(){return[]};function M(s,o){if(1&s){const e=t.RV6();t.j41(0,"div",2)(1,"h3",3),t.EFF(2,"\u{1f525} Available Practice Tests"),t.k0s(),t.j41(3,"div",4)(4,"nav")(5,"ul",5)(6,"li",6)(7,"button",7),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.changePage(i.currentPage-1))}),t.EFF(8,"Previous"),t.k0s()(),t.DNE(9,X,3,3,"li",8),t.j41(10,"li",6)(11,"button",7),t.bIt("click",function(){t.eBV(e);const i=t.XpG();return t.Njj(i.changePage(i.currentPage+1))}),t.EFF(12,"Next"),t.k0s()()()()(),t.j41(13,"div",9),t.DNE(14,N,9,3,"div",10),t.k0s()()}if(2&s){const e=t.XpG();t.R7$(6),t.AVh("disabled",1===e.currentPage),t.R7$(3),t.Y8G("ngForOf",t.lJ4(6,S).constructor(e.totalPages)),t.R7$(1),t.AVh("disabled",e.currentPage===e.totalPages),t.R7$(4),t.Y8G("ngForOf",e.paginatedTests)}}function V(s,o){1&s&&(t.j41(0,"div",20)(1,"h5",21),t.EFF(2,"No tests available at the moment."),t.k0s()())}let A=(()=>{class s{constructor(e,n){this.commonHttpService=e,this.router=n,this.tests=[],this.paginatedTests=[],this.completedTestIds=[],this.currentPage=1,this.pageSize=6}ngOnInit(){this.fetchTests(),this.completedTestIds=JSON.parse(localStorage.getItem("test/completedTests")||"[]")}fetchTests(){this.commonHttpService.get("test").subscribe(e=>{this.tests=e.data,this.updatePagination()})}isTestCompleted(e){return this.completedTestIds.includes(e)}updatePagination(){const e=(this.currentPage-1)*this.pageSize;this.paginatedTests=this.tests.slice(e,e+this.pageSize)}changePage(e){e<1||e>Math.ceil(this.tests.length/this.pageSize)||(this.currentPage=e,this.updatePagination())}startTest(e){this.router.navigate(["/online-test/test-page"],{queryParams:{testId:e}})}static{this.\u0275fac=function(n){return new(n||s)(t.rXU(p.N),t.rXU(c.Ix))}}static{this.\u0275cmp=t.VBU({type:s,selectors:[["app-practice-tests"]],decls:2,vars:2,consts:[["class","container py-4",4,"ngIf"],["class","container text-center mt-5",4,"ngIf"],[1,"container","py-4"],[1,"text-center","mb-4","text-primary","fw-bold"],[1,"d-flex","justify-content-end","mb-3"],[1,"pagination"],[1,"page-item"],[1,"page-link",3,"click"],["class","page-item",3,"active",4,"ngFor","ngForOf"],[1,"row"],["class","col-md-6 col-lg-4 mb-4",4,"ngFor","ngForOf"],[1,"col-md-6","col-lg-4","mb-4"],[1,"card","shadow-sm","h-100","border-primary"],[1,"card-body","d-flex","flex-column","justify-content-between"],[1,"card-title","fw-semibold"],[4,"ngIf","ngIfElse"],["completedTemplate",""],[1,"btn","btn-outline-primary","w-100","mt-2",3,"click"],[1,"alert","alert-success","text-center","mt-2","mb-2","p-2","rounded-3"],[1,"btn","btn-outline-secondary","w-100",3,"click"],[1,"container","text-center","mt-5"],[1,"text-muted"]],template:function(n,i){1&n&&(t.DNE(0,M,15,7,"div",0),t.DNE(1,V,3,0,"div",1)),2&n&&(t.Y8G("ngIf",i.tests.length>0),t.R7$(1),t.Y8G("ngIf",0==i.tests.length))},dependencies:[l.Sq,l.bT],styles:[".card-title[_ngcontent-%COMP%]{font-size:1.1rem;color:#212529}.alert-success[_ngcontent-%COMP%]{background-color:#e9f8ec;color:#198754;font-weight:500}.btn-outline-primary[_ngcontent-%COMP%]{font-weight:500}"]})}}return s})();var _=a(1113),f=a(431);const Y=[{path:"",component:h},{path:"tests",component:v},{path:"test-page",canActivate:[_.W],component:E},{path:"test-result",canActivate:[_.W,f.u],data:{role:"user"},component:G},{path:"practice-tests",canActivate:[_.W,f.u],data:{role:"user"},component:A}];let q=(()=>{class s{static{this.\u0275fac=function(n){return new(n||s)}}static{this.\u0275mod=t.$C({type:s})}static{this.\u0275inj=t.G2t({imports:[c.iI.forChild(Y),c.iI]})}}return s})(),U=(()=>{class s{static{this.\u0275fac=function(n){return new(n||s)}}static{this.\u0275mod=t.$C({type:s})}static{this.\u0275inj=t.G2t({imports:[l.MD,q,u.YN]})}}return s})()}}]);